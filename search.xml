<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Note-DBS</title>
      <link href="/2024/10/01/note-dbs/"/>
      <url>/2024/10/01/note-dbs/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库系统笔记"><a href="#数据库系统笔记" class="headerlink" title="数据库系统笔记"></a>数据库系统<br>笔记</h1><p>计科210X 甘晴void 202108010XXX</p><p>教材：《数据库系统概论》第6版<br><img src="/Note-DBS/Note-DBS.png" alt="在这里插入图片描述"><br>（图片来源于网络，侵删)</p><p><strong>【关于版权&#x2F;保密问题的说明】<br>有关课程教案（涉及人大数据库&#x2F;清华数据库的部分以及湖南大学数据库课题组）的课件部分，出于版权原因（仅用于校内教学），我已经全部删除，并对之前造成的影响道歉。现在的笔记中不包含所有可能造成版权纠纷以及湖南大学课题组的课件部分。即，笔记中的所有内容为《数据库系统原理》书本上可找到的内容，与我自己的想法的并集，不存在原样直接上传教案的情况。若有其它问题，欢迎相关监管方面在通知群里再戳我，我一定及时修改(qwq)，再次为之前未经允许上传PPT向老师致歉。</strong></p><p>[TOC]</p><h1 id="第一篇-基础篇"><a href="#第一篇-基础篇" class="headerlink" title="第一篇 基础篇"></a>第一篇 基础篇</h1><h2 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1 绪论"></a>1 绪论</h2><h3 id="1-1数据库系统概述"><a href="#1-1数据库系统概述" class="headerlink" title="1.1数据库系统概述"></a>1.1数据库系统概述</h3><p>基本概念：</p><ul><li><p>数据：<strong>描述事物的符号记录</strong>称为数据。数据的含义称为数据的语义，数据与其语义是不可分的。</p></li><li><p>数据库（DB）：<strong>长期存储在计算机内、有组织的、可共享的大量数据的集合</strong>。数据库中的数据按一定的数据模型组织、描述和存储，具有<strong>较小的冗余度</strong>、<strong>较高的数据独立性和易扩展性</strong>，<strong>并可为各种用户共享</strong>。</p></li><li><p>数据库管理系统（DBMS）：数据库管理软件，<strong>计算机的基础软件</strong></p><p>数据定义功能<br>数据组织、存储和管理<br>数据操纵功能<br>数据库的事务管理和运行管理<br>数据库的建立和维护功能<br>其他功能</p></li><li><p>数据库系统（DBS）：由DB,DBMS及其应用开发工具，应用系统和DBA组成的<strong>存储、管理、处理和维护数据的系统</strong></p></li><li><p>DBA数据库管理员</p></li></ul><p>数据库管理技术的产生和发展：</p><p>人工管理阶段 -&gt; 文件系统阶段 -&gt; 数据库系统阶段</p><p>数据库系统阶段的4个优点</p><ul><li>整体数据的<strong>结构化</strong>(与文件系统的本质区别)</li><li>数据的<strong>共享性</strong>强、冗余度低且易于扩充</li><li>数据的<strong>独立性</strong>强（物理独立性，逻辑独立性）</li><li>数据<strong>由数据库管理系统统一管理和控制</strong></li></ul><p>另外还需要提供的功能：</p><ul><li>数据的安全性保护：防止不合法使用造成的数据泄密和破坏。</li><li>数据的完整性检查：控制数据的正确性，有效性和相容性。</li><li>并发控制</li><li>数据库恢复</li></ul><h3 id="1-2数据模型"><a href="#1-2数据模型" class="headerlink" title="1.2数据模型"></a>1.2数据模型</h3><p>数据模型：数据库系统的核心和基础。</p><p>数据建模：把现实世界中的具体事物抽象、组织为某一数据库管理系统支持的数据模型。</p><p>概念模型（现实世界抽象为信息世界） -&gt; 数据模型（信息世界转换为机器世界）</p><p>概念模型：</p><ul><li>实体：客观存在并可相互区别的实物称为实体。</li><li>属性：实体所具有的某一特性。</li><li>码(key)：唯一标识实体的属性集称为码。</li><li>实体型：用实体名和属性名集合来抽象和刻画同类实体。例如：学生(学号，姓名，性别，院系)。</li><li>实体集：同一类型实体的集合称为实体集。</li><li>联系：实体之间的联系通常是指不同实体集之间的联系。有一对一，一对多和多对多等多种类型。</li></ul><p>概念模型的表示方法：实体-联系模型（E-R模型）</p><p>数据模型三要素：</p><ul><li>数据结构：描述数据库的组成对象以及对象之间的联系。</li><li>数据操作：对数据库中各种对象的实例允许执行的操作的集合，包括操作及有关的操作规则。</li><li>完整性约束：一组完整性规则。</li></ul><p>层次模型：</p><ul><li>数据库中满足下面两个条件的基本层次联系的集合为层次模型：<ul><li>有且只有一个结点没有双亲结点，称为根结点。</li><li>根以外的其他结点只有一个双亲结点。</li></ul></li><li>【注意：层次模型是一种一对多的联系】</li><li>数据操纵主要为查询，插入，删除，更新。操作要满足层次模型的完整性约束条件。</li><li>层次模型的优点：<ul><li><strong>数据结构简单清晰</strong>。</li><li><strong>查询效率高</strong>(因为联系用有向边表示)。</li><li>提供了良好的<strong>完整性支持</strong>。</li></ul></li><li>【未标着重】层次模型的缺点：<ul><li>现实中很多联系是非层次性的。</li><li>一个结点有多个双亲结点，就只能引入冗余数据，应用程序编写复杂。</li><li>查询子女结点必须通过双亲结点。</li><li>结构严密，层次命令趋于程序化。</li></ul></li></ul><p>网状模型：</p><ul><li>数据库中满足下面两个条件的基本层次联系的集合为网状模型：<ul><li>允许一个以上的结点无双亲。</li><li>一个结点可以有多于一个的双亲。</li></ul></li><li>【注意：层次模型是一种多对多的联系】</li><li>具体的网状数据库系统对数据操纵都加了一些限制，提供了一定的完整性约束。</li><li>网状模型的优点：<ul><li>能够<strong>更为直接的描述现实世界</strong>。</li><li>具有良好的性能，<strong>存储效率较高</strong>。</li></ul></li><li>【未标着重】网状模型的缺点：<ul><li>结构比较复杂，不利于最终用户掌握。</li><li>DDL，DML复杂，并且要嵌入一种高级语言中，不容易掌握和使用。</li><li>记录之间的联系通过存取路径实现，访问数据时必须选择适当的存取路径，用户必须了解系统结构的细节。</li></ul></li></ul><p>关系模型：</p><ul><li>关系模型要求关系必须是规范化的，关系的每一个分量必须是一个不可分的数据项。</li><li>关系模型的优点：<ul><li>建立在严格的<strong>数学概念基础</strong>上。</li><li><strong>概念单一</strong>，</li><li><strong>关系模型存取路径对用户隐蔽</strong>：有更高的数据独立性，更好的安全保密性。（★因此查询需优化）</li></ul></li></ul><h3 id="1-3数据库系统的结构-三级模式结构"><a href="#1-3数据库系统的结构-三级模式结构" class="headerlink" title="1.3数据库系统的结构(三级模式结构)"></a>1.3数据库系统的结构(三级模式结构)</h3><ul><li>模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述。数据库管理系统提供模式数据定义语言(DDL)来严格定义模式。</li><li>模式反映的是数据结构及其联系，而实例反映的是数据库某一时刻的状态。</li><li>三级模式结构：<ul><li>模式：是<strong>所有用户的公共数据视图</strong>。</li><li>外模式：<strong>数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述</strong>，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。</li><li>内模式：<strong>数据物理结构和存储方式的描述，是数据在数据库内部的组织方式</strong>。</li></ul></li><li>为了实现以上三个抽象层次的联系和转换，数据库管理系统在三级模式之间提供了两层映像：外模式&#x2F;模式映像和模式&#x2F;内模式映像。<ul><li>外模式&#x2F;模式映像：定义了外模式与模式之间的对应关系。</li><li>模式&#x2F;内模式映像：定义了数据全局逻辑结构和存储结构之间的关系。</li></ul></li><li>数据库模式即全局逻辑结构是数据库的中心与关键，独立于数据库的其他层次。（设计数据库模式结构时应<strong>首先确定</strong>）</li><li>当模式改变时，修改映像使外模式不变，这保证了数据与程序的<strong>逻辑独立性</strong>。</li><li>当存储结构(内模式)改变时，修改映像使模式保持不变，这保证了数据与程序的<strong>物理独立性</strong>。</li></ul><h3 id="1-4数据库系统的组成"><a href="#1-4数据库系统的组成" class="headerlink" title="1.4数据库系统的组成"></a>1.4数据库系统的组成</h3><ul><li>硬件平台及数据库</li><li>软件</li><li>人员</li></ul><p>人员包括</p><ul><li>数据库管理员：5个职责（书P32）</li><li>系统分析员和数据库设计人员</li><li>应用程序员：编程</li><li>最终用户</li></ul><h3 id="1-5总结"><a href="#1-5总结" class="headerlink" title="1.5总结"></a>1.5总结</h3><p>4个基本概念</p><p>数据模型3要素</p><p>三级模式与两级映射保证逻辑独立性与物理独立性</p><p>数据库系统三级模式结构的优点</p><p>为什么具有数据和结构的独立性</p><h2 id="2-关系数据库"><a href="#2-关系数据库" class="headerlink" title="2 关系数据库"></a>2 关系数据库</h2><h3 id="2-1关系"><a href="#2-1关系" class="headerlink" title="2.1关系"></a>2.1关系</h3><h4 id="2-1-1关系"><a href="#2-1-1关系" class="headerlink" title="2.1.1关系"></a>2.1.1关系</h4><p>域：域</p><p>笛卡尔积：笛卡尔积（域的运算）、元组、n元组、分量（元组中的每一个值）、基数 （一个域允许的不同取值个数）</p><p>关系：</p><ul><li><p>关系（一些域的笛卡尔积的子集即为这些域的关系，抽取有意义的子集），记作R(……)、</p></li><li><p>关系的目&#x2F;度n（运算的笛卡尔积的个数，即关系表的特征列个数）、</p></li><li><p>属性（n目关系必有n个属性）、</p></li></ul><p>三类关系</p><p>基本关系（基本表&#x2F;基表）【实际存在】有6条性质（列同质、不同元组码不能相同、不同列可出自同一域、列可换顺序、行可换顺序、分量取原子值，即不能表中有表）</p><p>查询表【针对查询结果的临时表，实际存在】</p><p>视图表【虚表】</p><h4 id="2-1-2关系模式"><a href="#2-1-2关系模式" class="headerlink" title="2.1.2关系模式"></a>2.1.2关系模式</h4><p>R(A1,A2,A3,)</p><ul><li>候选码、主码、全码、主属性、非主属性（非码属性）</li></ul><p>关系数据库：关系数据库模式：关系数据库的“型”</p><p>关系模型的存储结构：RDBMS</p><h3 id="2-2关系操作"><a href="#2-2关系操作" class="headerlink" title="2.2关系操作"></a>2.2关系操作</h3><h4 id="2-2-1基本的关系操作"><a href="#2-2-1基本的关系操作" class="headerlink" title="2.2.1基本的关系操作"></a>2.2.1基本的关系操作</h4><ul><li>查询操作</li><li>数据更新操作</li></ul><h4 id="2-2-2关系数据语言的分类"><a href="#2-2-2关系数据语言的分类" class="headerlink" title="2.2.2关系数据语言的分类"></a>2.2.2关系数据语言的分类</h4><ul><li>关系代数语言</li><li>关系演算语言（不要求）</li><li>结构化查询语言（Structured Query Language, SQL）</li></ul><p>关系完备性：一个关系数据语言能够表示关系代数可以表示的查询</p><h3 id="2-3关系完整性"><a href="#2-3关系完整性" class="headerlink" title="2.3关系完整性"></a>2.3关系完整性</h3><p>包括</p><ul><li>实体完整性（主属性不取空值不得重复）</li><li>参照完整性（注意外码的定义：不是参照关系的码但是被参照关系的主码）（外码可以取空值或被参考关系中已经存在的值）</li><li>用户定义的完整性（用户可以自己定义：唯一约束、主键约束、自增长约束、默认值约束、检查约束）</li></ul><h3 id="★2-4关系代数"><a href="#★2-4关系代数" class="headerlink" title="★2.4关系代数"></a>★2.4关系代数</h3><h4 id="2-4-1传统的集合运算"><a href="#2-4-1传统的集合运算" class="headerlink" title="2.4.1传统的集合运算"></a>2.4.1传统的集合运算</h4><p>并、差、交、笛卡尔积</p><p>常考：R∩S&#x3D;R-(R-S)</p><h4 id="2-4-2专门的关系运算"><a href="#2-4-2专门的关系运算" class="headerlink" title="2.4.2专门的关系运算"></a>2.4.2专门的关系运算</h4><p>基础记号：</p><ul><li>关系R、t∈R（t是关系R的一个元组）、t[Ai]（元组t中相应于属性Ai的一个分量）</li><li>t[A]&#x3D;（t[Ai1]，t[Ai2]，t[Ai3]，……，t[Aik]）（元组t中相应于属性Ai的一个分量）</li><li>元组的连接&#x2F;串接（就是把列连起来）</li><li>象集（关系R(X,Z)，对所有列ABCD……,以A&#x3D;a，B&#x3D;b（即X&#x3D;x）这样的条件筛选满足的元组，筛选结果中非列AB的列属性构成的组合即为x在Z上的象集）</li></ul><p>专门关系：</p><ul><li>选择（σ）：（根据逻辑表达式来筛选有效元组）【注意比较运算符的不等于是&lt;&gt;】</li><li>投影（Π）：（只关注属性列，筛选出某些属性列并去除重复的元组）</li><li>连接（⋈）：对两个关系R、S，从笛卡尔积中抽取满足条件的元组（特殊的连接：θ取“&#x3D;”为等值连接、自然连接）</li><li>等值连接：抽取R中A列与S中B列相等的元组</li><li>自然连接：进行比较的列必需是同名的属性列，可能造成悬浮问题</li><li>悬浮元组、外连接、左外连接（只保留左边关系的悬浮元组）、右外连接（只保留右边关系的悬浮元组）</li><li>除运算（÷）：（除集合）对于公共属性列的投影，（被除集合）中谁的（象集）完全包含它，谁就需要被纳入结果。</li><li>【÷运算可以用来做筛选：例如由SC表÷Course表可得到选修所有课程学生的名单】</li></ul><p>经过有限次复合得到的表达式称为 关系代数表达式</p><p>如何使用五种基本运算来表达专门关系？是一个重要的问题</p><blockquote><p><strong>【知识框架总结因为版权问题不能放在这里】</strong></p></blockquote><h2 id="3-关系数据库标准语言-SQL"><a href="#3-关系数据库标准语言-SQL" class="headerlink" title="3 关系数据库标准语言 SQL"></a>3 关系数据库标准语言 SQL</h2><h3 id="3-1-SQL概述"><a href="#3-1-SQL概述" class="headerlink" title="3.1 SQL概述"></a>3.1 SQL概述</h3><p>▲特点</p><ul><li>功能综合且风格统一</li><li>数据操纵高度非过程化（只要提出做什么就可以）</li><li>面向集合的操作方式</li><li>以统一的语法结构提供多种使用方式（独立语言&#x2F;嵌入式语言）</li><li>语言简洁且易学易用</li></ul><h3 id="3-2数据定义"><a href="#3-2数据定义" class="headerlink" title="3.2数据定义"></a>3.2数据定义</h3><p>模式的定义与删除</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#定义模式</span><span class="token keyword">create</span> <span class="token keyword">schema</span> <span class="token punctuation">[</span>模式名<span class="token punctuation">]</span> <span class="token keyword">authorization</span> <span class="token operator">&lt;</span>用户名<span class="token operator">></span><span class="token punctuation">;</span><span class="token comment">#删除模式</span><span class="token keyword">drop</span> <span class="token keyword">schema</span> <span class="token operator">&lt;</span>模式名<span class="token operator">></span><span class="token operator">&lt;</span><span class="token keyword">cascade</span><span class="token operator">|</span><span class="token keyword">restrict</span><span class="token operator">></span><span class="token comment">//级联与限制必须二选一（CASADE会删除所有，而若该模式内有东西，RESTRICT会拒绝删除）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>基本表的定义、删除与修改</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#基本表的定义</span><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token operator">&lt;</span>数据类型<span class="token operator">></span><span class="token punctuation">[</span>列级完整性约束<span class="token punctuation">]</span>                  ……                  <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>表级完整性约束<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#一些表级完整性约束</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span>列级完整性<span class="token operator">/</span>表级完整性<span class="token comment">#基本表的修改</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token punctuation">[</span><span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>新列名<span class="token operator">></span><span class="token operator">&lt;</span>数据类型<span class="token operator">></span><span class="token punctuation">[</span>完整性约束<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">ADD</span> <span class="token operator">&lt;</span>表级完整性约束<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">DROP</span> <span class="token punctuation">[</span><span class="token keyword">column</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">cascade</span><span class="token operator">|</span><span class="token keyword">restrict</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">DROP</span> <span class="token keyword">constraint</span> <span class="token operator">&lt;</span>完整性约束名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">restrict</span><span class="token operator">|</span><span class="token keyword">cascade</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span> <span class="token keyword">to</span> <span class="token operator">&lt;</span>新列名<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span> <span class="token keyword">TYPE</span> <span class="token operator">&lt;</span>数据类型<span class="token operator">></span><span class="token punctuation">]</span><span class="token comment">#基本表的删除</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">restrict</span><span class="token operator">|</span><span class="token keyword">cascade</span><span class="token punctuation">]</span>  <span class="token comment">#▲注意区别，默认RESTRICT</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>模式与基本表</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#基本表属于某一个特定的模式，下面是创建特定模式下基本表的方法。</span><span class="token comment">#可以在指定模式下创建基本表</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token string">"SC-C-SC"</span><span class="token punctuation">.</span>Student（……）<span class="token comment">#可以设定模式然后创建基本表</span><span class="token keyword">SHOW</span> SEARCH_PATH<span class="token punctuation">;</span><span class="token comment">#可以查看当前搜索路径</span><span class="token keyword">SET</span> SEARCH_PATH <span class="token keyword">TO</span> <span class="token string">"SC-C-SC"</span><span class="token punctuation">,</span><span class="token keyword">PUBLIC</span><span class="token punctuation">;</span><span class="token comment">#设置当前模式</span><span class="token comment">#之后再创建基本表</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>课本示例</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#课本示例</span><span class="token comment">/*建立一个学生表*/</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student<span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    Sname <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>    Ssex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    Sage <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>    Sdept <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*建立一个课程表*/</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Course<span class="token punctuation">(</span>Cno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    Cname <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    Cpno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    Ccredit <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>    <span class="token comment">/*表级完整性约束条件*/</span>    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Cpno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Course<span class="token punctuation">(</span>Cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*建立学生选课表SC*/</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> SC<span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    Cno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    Grade <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Cno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Cource<span class="token punctuation">(</span>Cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>数据类型</p><p>P75</p><p>索引的建立与删除</p><p>建立索引：加快查询速度</p><p>索引是关系数据库管理系统的内部实现技术，属于<strong>内模式</strong>的范畴。</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#索引的建立</span><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">unique</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cluster<span class="token punctuation">]</span><span class="token keyword">index</span> <span class="token operator">&lt;</span>索引名<span class="token operator">></span><span class="token keyword">on</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">[</span><span class="token operator">&lt;</span>次序<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">,</span>……<span class="token punctuation">)</span><span class="token comment">#索引的修改</span><span class="token keyword">ALTER</span> <span class="token keyword">index</span> <span class="token operator">&lt;</span>旧索引名<span class="token operator">></span> <span class="token keyword">rename</span> <span class="token keyword">to</span> <span class="token operator">&lt;</span>新索引名<span class="token operator">></span><span class="token comment">#索引的删除</span><span class="token keyword">DROP</span> <span class="token keyword">index</span> <span class="token operator">&lt;</span>索引名<span class="token operator">></span><span class="token comment">#e.g.</span><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> Stusno <span class="token keyword">ON</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> Cousno <span class="token keyword">ON</span> Cource<span class="token punctuation">(</span>Cno<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> SCno <span class="token keyword">ON</span> SC<span class="token punctuation">(</span>Sno <span class="token keyword">ASC</span><span class="token punctuation">,</span>Cno <span class="token keyword">DESC</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>数据字典（记录数据定义）</p><h3 id="★3-3数据查询"><a href="#★3-3数据查询" class="headerlink" title="★3.3数据查询"></a>★3.3数据查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">all</span><span class="token operator">|</span><span class="token keyword">distinct</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>目标列表达式<span class="token operator">></span><span class="token punctuation">[</span>别名<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>目标列表达式<span class="token operator">></span><span class="token punctuation">[</span>别名<span class="token punctuation">]</span><span class="token punctuation">]</span>……<span class="token keyword">FROM</span> <span class="token operator">&lt;></span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span><span class="token operator">&lt;</span>条件表达式<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>某个列名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">having</span> <span class="token operator">&lt;</span>条件表达式<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>某个列名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">asc</span><span class="token operator">|</span><span class="token keyword">desc</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">limit</span> <span class="token operator">&lt;</span>行数<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token keyword">offset</span> <span class="token operator">&lt;</span>行数<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.3.1单表查询</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">#选择表中的若干列（投影操作）SELECT Sno FROM Student;#选择表中的若干组（选择操作）SELECT DISTINCT Sno FROM Student;#比较大小WHERE &#x3D; &gt; &lt; &lt;&gt;  !&#x3D; !&gt; !&lt;#确定范围SELECT Sno FROM Student WHERE Sage BETWEEN 20 AND 21;SELECT Sno FROM Student WHERE Sage NOT BETWEEN 20 AND 21;#确定集合IN | NOT IN#字符匹配% #任意长度字符串_ #任意单个字符WHERE Sname LIKE &#39;__寅&#39;;WHERE Sname NOT LIKE &#39;%寅&#39;;#涉及到含有通配符，可以后跟ESCAPE&#39;\&#39;进行转义#WHERE Sname NOT LIKE &#39;%寅\_&#39; ESCAPE &#39;\&#39;;#涉及空值的查询WHERE GRADE IS NULLWHERE GRADE IS NOT NULL#多重条件查询AND OR 括号#ORDER BY子句ORDER BY grade DESC | ASC #（排序操作）允许第二关键字#查询结果排序，不影响原表#聚集函数（数理统计）#不能用作WHERE子句条件表达式#只能作为SELECT子句和GROUP BY子句的HAVING短语COUNT(*)COUNT([ DISTINCT | ALL ]&lt;列名&gt;)支持 sum avg max min #e.g.SELECT COUNT(DISTINCT Sno) From SC;#GROUP BY子句（分组筛选）★★★GROUP BYSELECT Sno FROM SC GROUP BY Sno HAVING COUNT(*) &gt; 10;#Limit子句（只选择前多少个子句，常与ORDER BY连用）LIMIT 10 OFFSET 5 #显示10个忽略前5个<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.3.2连接查询</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># 自然连接查询 复合条件连接查询</span><span class="token keyword">SELECT</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token keyword">FROM</span> student<span class="token punctuation">,</span>sc<span class="token keyword">WHERE</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">AND</span>sc<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">'2'</span> <span class="token operator">AND</span> sc<span class="token punctuation">.</span>grade<span class="token operator">></span><span class="token number">90</span><span class="token punctuation">;</span><span class="token comment"># 自身连接，需要为表起别名</span><span class="token comment">#e.g. 间接先修课（先修课的先修课）</span><span class="token keyword">SELECT</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cno<span class="token punctuation">,</span>seconde<span class="token punctuation">.</span>cpno<span class="token keyword">FROM</span> course <span class="token keyword">first</span><span class="token punctuation">,</span>course <span class="token keyword">second</span><span class="token keyword">WHERE</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cpno<span class="token operator">=</span><span class="token keyword">second</span><span class="token punctuation">.</span>cno<span class="token punctuation">;</span><span class="token comment"># 外连接，把表中的悬浮元组保存在结果关系中</span><span class="token keyword">SELECT</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade<span class="token keyword">FROM</span> student <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> sc <span class="token keyword">ON</span> <span class="token punctuation">(</span>student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># 多表连接和以上类似</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.3.3嵌套查询</p><p>查询块：一个select-from-where</p><p>嵌套查询，外层查询（父查询），内层查询（子查询）</p><p>【子查询不能用order by】</p><p> any,all,</p><p> exist谓词：只返回逻辑真假<br> 存在量词与全称量词</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">  <span class="token comment"># 不相关子查询</span><span class="token keyword">SELECT</span> name<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> dept <span class="token operator">IN</span><span class="token punctuation">(</span>        <span class="token keyword">SELECT</span> dept         <span class="token keyword">FROM</span> student        <span class="token keyword">WHERE</span> name<span class="token operator">=</span><span class="token string">'刘晨'</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># 相关子查询</span><span class="token keyword">SELECT</span> sno<span class="token punctuation">,</span>cno<span class="token keyword">FROM</span> SC x<span class="token keyword">WHERE</span> Grade <span class="token operator">>=</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span>               <span class="token keyword">FROM</span> SC y    <span class="token keyword">WHERE</span> y<span class="token punctuation">.</span>sno<span class="token operator">=</span>x<span class="token punctuation">.</span>sno               <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># ANY(SOME)/ALL</span><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>age<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> age<span class="token operator">&lt;</span><span class="token keyword">ALL</span><span class="token punctuation">(</span>        <span class="token keyword">SELECT</span> age        <span class="token keyword">FROM</span> student        <span class="token keyword">WHERE</span> dept<span class="token operator">=</span><span class="token string">'CS'</span>    <span class="token punctuation">)</span>    <span class="token operator">AND</span> dept<span class="token operator">!=</span><span class="token string">'CS'</span><span class="token punctuation">;</span><span class="token comment"># EXIST</span><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span>        <span class="token keyword">FROM</span> SC        <span class="token keyword">WHERE</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">AND</span> cno<span class="token operator">=</span><span class="token string">'1'</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>★全称量词的转换</p><p>看书</p><p>★逻辑蕴含的转换</p><p>看书和作业例题</p><p>3.3.4集合查询（了解即可）</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># UNION</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> dept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token keyword">UNION</span> <span class="token punctuation">(</span><span class="token keyword">UNION</span> <span class="token keyword">ALL</span><span class="token punctuation">)</span><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> age<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span><span class="token comment"># INTERSECT</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> dept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token keyword">INTERSECT</span><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> age<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span><span class="token comment"># EXCEPT</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> dept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token keyword">EXCEPT</span><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> age<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.3.5基于派生表的查询</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span>Cno<span class="token keyword">FROM</span> SC<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span><span class="token function">Avg</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno<span class="token punctuation">)</span><span class="token keyword">AS</span> Avg_SC<span class="token punctuation">(</span>Avg_sno<span class="token punctuation">,</span>Avg_grade<span class="token punctuation">)</span><span class="token keyword">WHERE</span> SC<span class="token punctuation">.</span>Sno <span class="token operator">=</span> Avg_SC<span class="token punctuation">.</span>Avg_sno <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Grade <span class="token operator">>=</span> Avg_SC<span class="token punctuation">.</span>Avg_grade<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-4数据更新"><a href="#3-4数据更新" class="headerlink" title="3.4数据更新"></a>3.4数据更新</h3><p>3.4.1插入数据</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">插入一个元组<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列<span class="token number">2</span><span class="token operator">></span>，……<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">#如果与原表一致则可以省略</span><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>常量<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>常量<span class="token number">2</span><span class="token operator">></span>，……<span class="token punctuation">)</span><span class="token punctuation">;</span>插入子查询结果<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列<span class="token number">2</span><span class="token operator">></span>，……<span class="token punctuation">)</span><span class="token punctuation">]</span>子查询<span class="token punctuation">;</span><span class="token comment">#e.g.</span><span class="token comment"># 插入元组</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage<span class="token punctuation">)</span><span class="token comment">#可以不指出属性名，但VALUE要保持顺序</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'201215128'</span><span class="token punctuation">,</span><span class="token string">'陈东'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'IS'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">#未给出的列将自动赋空值</span><span class="token comment"># 插入子查询结果</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> DEPT_AGE<span class="token punctuation">(</span>SDEPT <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>     AVG_AGE <span class="token keyword">SMALLINT</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> DEPT_AGE<span class="token punctuation">(</span>SDEPT<span class="token punctuation">,</span>AVG_AGE<span class="token punctuation">)</span><span class="token keyword">SELECT</span> SDEPT<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>SAGE<span class="token punctuation">)</span><span class="token keyword">FROM</span> STUDENT<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> SDEPT<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.4.2修改数据</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token keyword">set</span> <span class="token operator">&lt;</span>列名<span class="token operator">>=</span><span class="token operator">&lt;</span>表达式<span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">>=</span><span class="token operator">&lt;</span>表达式<span class="token operator">></span>……<span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>条件<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment"># 修改一个元组的值</span><span class="token keyword">UPDATE</span> student<span class="token keyword">SET</span> sage<span class="token operator">=</span><span class="token number">22</span><span class="token keyword">WHERE</span> sno<span class="token operator">=</span><span class="token string">'201215121'</span><span class="token punctuation">;</span><span class="token comment"># 修改多个元组的值</span><span class="token keyword">UPDATE</span> student<span class="token keyword">SET</span> sage<span class="token operator">=</span>sage<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment"># 带子查询的修改语句</span><span class="token keyword">UPDATE</span> SC<span class="token keyword">SET</span> grade<span class="token operator">=</span><span class="token number">0</span><span class="token keyword">WHERE</span> sno <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> sno     <span class="token keyword">FROM</span> student     <span class="token keyword">WHERE</span> sdept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.4.3删除数据</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>条件<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-5空值的处理"><a href="#3-5空值的处理" class="headerlink" title="3.5空值的处理"></a>3.5空值的处理</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">空值与另一个值的算数运算结果为空值空值与另一个值的比较运算结果为UNKNOWN，不参与<span class="token operator">/</span>影响是非判定<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-6视图"><a href="#3-6视图" class="headerlink" title="3.6视图"></a>3.6视图</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token operator">&lt;</span>视图名<span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token number">2</span><span class="token operator">></span>，……<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">as</span> <span class="token operator">&lt;</span>子查询<span class="token operator">></span><span class="token comment">#子查询可以嵌套，此时称建立在多个基本表上</span><span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">#加上该句之后插入值时会自动检查是否符合子查询的要求，若不满足则拒绝</span><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> <span class="token operator">&lt;</span>视图名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token keyword">UPDATE</span> <span class="token keyword">SET</span> <span class="token keyword">WHERE</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">VALUES</span><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token keyword">WHERE</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>执行CREATE VIEW 语句时指示把视图的定义存入数据字典，不执行SELECT语句，只有在对视图查询时，才按视图的定义从基本表中将数据查出。</li><li>行列子集视图：从单个基本表导出，并且只是丢掉了某些行或列，但保留了主码。（一般是可更新的）</li><li>带表达式的视图：带虚拟列的视图。</li><li>视图消解：首先进行有效性检查，检查查询中涉及的视图等是否存在。若存在，则从数据字典中取出视图的定义，把定义中的子查询和用户的子查询结合起来，转换成等价的对基本表的查询，然后再执行修正了的查询</li></ul><p>★视图的作用：</p><ul><li>视图能够对机密数据提供<strong>安全保护</strong></li><li>视图<strong>对重构数据库提供了一定程度的逻辑独立性</strong></li><li>视图能够<strong>简化用户操作</strong></li><li>视图使用户能以<strong>多种角度看待同一数据</strong></li></ul><h2 id="4-数据库安全性"><a href="#4-数据库安全性" class="headerlink" title="4 数据库安全性"></a>4 数据库安全性</h2><p>数据库安全性是指<strong>保护数据库</strong>，以防<strong>不合法使用</strong>所造成的数巨泄露、篡改或破坏。</p><p>★数据库的安全性保护数据<strong>防止恶意的破坏和非法的存取</strong></p><p>不安全因素：</p><ul><li>非授权用户对数据库的恶意存取和破坏</li><li>重要或敏感的数据被泄露</li><li>安全环境的脆弱性</li></ul><p>安全标准：TCSEC：A1,B3,B2,B1,C2,C1,D</p><p>CC</p><p>用户身份鉴别：静态口令鉴别，动态口令鉴别，生物特征鉴别，智能卡鉴别，入侵检测</p><p>存取控制：自主存取控制DAC（C2级），强制存取控制MAC（B1级）</p><h3 id="自主存取控制"><a href="#自主存取控制" class="headerlink" title="自主存取控制"></a>自主存取控制</h3><p>自主存取控制的缺点是可能存在数据无意识的泄露。因为数据本身并无安全性标记。</p><p>授权（grant）</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token operator">&lt;</span>权限<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>权限<span class="token number">2</span><span class="token operator">></span>……<span class="token comment">#全部，用all priviliges</span><span class="token keyword">ON</span> <span class="token operator">&lt;</span>对象类型<span class="token operator">></span><span class="token operator">&lt;</span>对象名<span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>对象类型<span class="token number">2</span><span class="token operator">></span><span class="token operator">&lt;</span>对象名<span class="token number">2</span><span class="token operator">></span>……<span class="token keyword">TO</span> <span class="token operator">&lt;</span>用户<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>用户<span class="token number">2</span><span class="token operator">></span>……<span class="token comment">#全部，用public</span><span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">]</span><span class="token comment">#是否允许授权传播</span><span class="token comment">#注意不得循环授权</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>收回（revoke）</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">revoke &lt;权限1&gt;,&lt;权限2&gt;……on &lt;对象类型&gt;&lt;对象名&gt;,&lt;对象类型2&gt;&lt;对象名2&gt;……from &lt;用户1&gt;,&lt;用户2&gt;……[cascade | restrict]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>创建数据库权限</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">create user &lt;username&gt; [with] [superuser | createdb] | password &#39;password&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>数据库角色</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">create role &lt;角色名&gt;#创建角色grant &lt;权限&gt; on &lt;对象类型&gt;&lt;对象名&gt; to &lt;角色&gt;#角色授权grant &lt;角色&gt; to &lt;角色&#x2F;用户&gt; [with admin option] #角色授予其他角色&#x2F;用户，with admin option是否允许传播revoke &lt;权限&gt; on &lt;对象类型&gt;&lt;对象名&gt; from &lt;角色&gt;#角色授权收回<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="强制存取控制"><a href="#强制存取控制" class="headerlink" title="强制存取控制"></a>强制存取控制</h3><p>强制存取控制是对数据本身进行密级标记，无论数据如何复制，标记与数据是一个不可分的整体。</p><p>同时检查DAC和MAC</p><p>每个数据库对象被标以一定的密级，每一个用户被授予某一个级别的许可证。对于任意一个对象，只有具有合法许可证的用户才可以存取。主体对客体的存取必须遵循以下规则：</p><ul><li>主体许可证级别大于或等于客体密级时，才能读取客体</li><li>主体许可证级别小于或等于客体密级时，才能写客体</li></ul><p>第二条是为了防止高许可证级别的主体恶意降低高密级客体导致数据泄露。</p><h3 id="视图机制"><a href="#视图机制" class="headerlink" title="视图机制"></a>视图机制</h3><p>与授权机制结合</p><h3 id="审计"><a href="#审计" class="headerlink" title="审计"></a>审计</h3><p>审计功能<strong>把用户对数据库的所有操作记录下来放入审计日志</strong>。</p><p>审计员可以通过审计日志监控数据库行为，找到非法存取数据的人，时间和内容等。审计机制提供了一种事后安全检查的机制。</p><p>DDL,DML,DCL分别是什么</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">show</span> audit_trail<span class="token keyword">set</span> audit_trail <span class="token keyword">to</span> <span class="token keyword">on</span>audit alert<span class="token punctuation">,</span><span class="token keyword">update</span> <span class="token keyword">on</span> xxx <span class="token keyword">by</span> access<span class="token comment">#对xxx进行审计</span>noaudit alert<span class="token punctuation">,</span><span class="token keyword">update</span> <span class="token keyword">on</span> xxx<span class="token comment">#取消对xxx进行审计</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="数据加密（略）"><a href="#数据加密（略）" class="headerlink" title="数据加密（略）"></a>数据加密（略）</h3><p>存储加密，传输加密</p><h3 id="其他安全性保护"><a href="#其他安全性保护" class="headerlink" title="其他安全性保护"></a>其他安全性保护</h3><p>推理控制，隐蔽信道，数据隐私，“三权分立”的安全管理机制</p><h2 id="5-数据库完整性"><a href="#5-数据库完整性" class="headerlink" title="5 数据库完整性"></a>5 数据库完整性</h2><p>★数据库的完整性防范对象：<strong>不合语义、不正确的数据</strong>，防止它们进入数据库。</p><p>数据库数据的<strong>正确性</strong>和<strong>相容性</strong></p><p>据库管理系统必须能够实现以下功能：</p><ul><li>提供<strong>定义完整性约束</strong>的机制</li><li>提供<strong>检查完整性约束</strong>的方法</li><li>提供完整性的<strong>违约处理</strong>办法</li></ul><h3 id="5-2-实体完整性"><a href="#5-2-实体完整性" class="headerlink" title="5.2 实体完整性"></a>5.2 实体完整性</h3><p>PRIMARY KEY 主码</p><p>检查主码值是否唯一，检查主码的各个属性是否为空，否则拒绝修改</p><h3 id="5-3-参照完整性"><a href="#5-3-参照完整性" class="headerlink" title="5.3 参照完整性"></a>5.3 参照完整性</h3><p>FOREIGN KEY 外码</p><p>对被参照表和参照表进行修改时可能出现问题</p><p>违约处理策略：（一般采用默认，如果需要其他，则在创建参照表时显式说明）</p><ul><li>拒绝执行（默认）</li><li>级联操作</li><li>设置为空值</li></ul><h3 id="5-4-用户定义的完整性"><a href="#5-4-用户定义的完整性" class="headerlink" title="5.4 用户定义的完整性"></a>5.4 用户定义的完整性</h3><p>属性上的约束（不满足拒绝执行）</p><ul><li>列值非空（NOT NULL）</li><li>列值唯一（UNIQUE）</li><li>检查列值是否满足一个条件表达式（CHECK短语）</li></ul><p>元组上的约束</p><p>违约处理：拒绝执行</p><p>注意如何使用CHECK子句</p><h3 id="5-5-完整性约束命名子句"><a href="#5-5-完整性约束命名子句" class="headerlink" title="5.5 完整性约束命名子句"></a>5.5 完整性约束命名子句</h3><p>完整性约束命名子句</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CONSTRAINT</span> <span class="token operator">&lt;</span>完整性约束名<span class="token operator">></span> <span class="token operator">&lt;</span>完整性约束<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>包括NOT NULL, UNIQUE, PRIMARY KEY, FOREIGN KEY, CHECK等子句</p><p>修改表中的完整性限制</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> xxxxx<span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> C1<span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> C2 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="5-7-触发器"><a href="#5-7-触发器" class="headerlink" title="5.7 触发器"></a>5.7 触发器</h3><p>事件-条件-动作规则（ECArule）</p><p>类似约束，自动激活，功能更强</p><p>定义触发器</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE TRIGGER &lt;触发器名&gt;&#123;BEFORE|AFTER&#125; &lt;触发事件&gt; ON &lt;表名&gt;#触发事件为INSERT,DELETE,UPDATE以及它们的and,or以及类似UPDATE &lt;触发列,……&gt;具体指明操作列REFERENCING NEW|OLD AS &lt;变量&gt;FOR EACH &#123;ROW|STATEMENT&#125; [WHEN&lt;触发条件&gt;]&lt;触发动作体&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>教材举例：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># 将INSERT语句增加的元组数记录到insertlog中</span><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> Student_Count<span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> StudentREFERENCINGNEW <span class="token keyword">TABLE</span> <span class="token keyword">AS</span> DELTA<span class="token keyword">FOR</span> EACH STATEMENT<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> StudentInsertLog<span class="token punctuation">(</span>Numbers<span class="token punctuation">)</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DELTA<span class="token punctuation">;</span><span class="token comment"># 将分数增加10%的操作添加到一个另一个表SC_U</span><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> SC_T<span class="token keyword">AFTER</span> <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> SCREFERENCINGOLDROW <span class="token keyword">AS</span> OldTupleNEWROW <span class="token keyword">AS</span> NewTuple<span class="token keyword">FOR EACH ROW</span><span class="token keyword">WHEN</span> <span class="token punctuation">(</span>NewTuple<span class="token punctuation">.</span>Grade<span class="token operator">>=</span><span class="token number">1.1</span><span class="token operator">*</span>OldTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">)</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> SC_U <span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>OldGrade<span class="token punctuation">,</span>NewGrade<span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span>OldTuple<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>OldTuple<span class="token punctuation">.</span>Cno<span class="token punctuation">,</span>ldTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">,</span>NewTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># 教授的工资不低于4000，低于4000则改为4000</span><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> Insert_Or_Update_SalBEFORE <span class="token keyword">INSERT</span> <span class="token operator">OR</span> <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> TeacherREFERENCING NEW <span class="token keyword">row</span> <span class="token keyword">AS</span> newtuple<span class="token keyword">FOR EACH ROW</span><span class="token keyword">BEGIN</span><span class="token keyword">IF</span><span class="token punctuation">(</span>newtuple<span class="token punctuation">.</span>Job<span class="token operator">=</span>‘教授’<span class="token punctuation">)</span> <span class="token operator">AND</span> newtuple<span class="token punctuation">.</span>Sal<span class="token operator">&lt;</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token keyword">THEN</span> newtuple<span class="token punctuation">.</span>Sal:<span class="token operator">=</span><span class="token number">4000</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行触发器（顺序）</p><ul><li>BEFORE触发器</li><li>激活该触发器的SQL语句</li><li>AFTER触发器</li></ul><p>删除触发器</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">DROP TRIGGER &lt;触发器名&gt; ON &lt;表名&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="【期中考试备考】"><a href="#【期中考试备考】" class="headerlink" title="【期中考试备考】"></a>【期中考试备考】</h1><p>事务的四个特性：持久性，一致性，原子性，隔离性</p><p>SQL语言具有的功能：数据定义，数据操纵，数据控制</p><p>DML数据操纵语言，DBL数据定义语言</p><h1 id="第二篇-设计与应用开发篇"><a href="#第二篇-设计与应用开发篇" class="headerlink" title="第二篇 设计与应用开发篇"></a>第二篇 设计与应用开发篇</h1><h2 id="★6-关系数据理论"><a href="#★6-关系数据理论" class="headerlink" title="★6 关系数据理论"></a>★6 关系数据理论</h2><h3 id="6-2-规范化"><a href="#6-2-规范化" class="headerlink" title="6.2 规范化"></a>6.2 规范化</h3><p>函数依赖：</p><ul><li><p>X函数确定Y   或   Y函数依赖于X   记作   X→Y</p></li><li><p>非平凡的函数依赖&#x2F;平凡的函数依赖（X→Y但Y⊆X，则是平凡的）</p></li><li><p>完全函数依赖&#x2F;部分函数依赖（X推出Y时X中的各部分是否缺一不可，若X的一部分就可以推出Y，则是部分函数依赖）</p></li><li><p>直接函数依赖&#x2F;传递函数依赖（X→Y,Y不是平凡的,Y不能→X,Y→Z,Z不是平凡的，则X→Z有传递函数依赖）</p></li></ul><p>（★不考）多值依赖：</p><ul><li>对于关系R(U,F),X+Y+Z&#x3D;U,若存在(x,y1,z1),(x,y2,z2)时，(x,y1,z2),(x,y2,z1)也同时存在，则多值函数依赖X→→Y。</li><li>理解：x确定时，y1到z的所有映射，y2都需要有。</li><li>若Z&#x3D;空集，则X→→Y为平凡的多值依赖</li></ul><p>码&#x2F;键：</p><ul><li>候选码：K-（F）-&gt;U，（U完全函数依赖于K），则K为R的候选码。</li><li>主码：若候选码多于一个，可以指定一个为主码。</li><li>全码：主码就是全部属性时。</li><li>超码：K-（P）-&gt;U，（U部分函数依赖于U），则K为超码。</li><li>外码：R中属性组X不是R的码，但X是另一个关系模式的码，X是R的外码。</li><li>候选码的超集（若存在）一定是超码，候选码的任何真子集一定不是超码</li></ul><p>范式</p><blockquote><p><strong>【范式和规范化因为版权问题不能放图片，我稍微简述一下】</strong></p></blockquote><p>大致就是</p><ul><li>第一范式（1NF）-&gt;第二范式（2NF）-&gt;第三范式（3NF）-&gt;巴斯科德范式（BCNF）-&gt;第四范式（4NF）-&gt;第五范式（5NF）</li><li>第一范式（1NF） 属性值都是不可分的原子值 第一范式（1NF）-&gt;第二范式（2NF） 消除非主属性对键的部分函数依赖</li><li>第二范式（2NF）-&gt;第三范式（3NF） 消除非主属性对键的传递函数依赖 第三范式（3NF）-&gt;巴斯科德范式（BCNF）</li><li>消除主属性对键的部分&#x2F;传递函数依赖 巴斯科德范式（BCNF）-&gt;第四范式（4NF）消除多值依赖</li><li>第四范式（4NF）-&gt;第五范式（5NF）消除链接依赖</li></ul><p>★不同等级的范式</p><ul><li><p>1NF（属性值都是不可分的原子值）</p></li><li><p>2NF（每一个非主属性完全函数依赖于任何一个候选码）</p></li><li><p>3NF（在1NF基础上，R不存在码X属性组Y非主属性Z且Z不是Y的子集，X→Y，Y→Z，Y不能→X）【每一个非主属性不传递依赖于码，不部分依赖于码】</p></li><li><p>BCNF（在1NF基础上，X→Y且Y不是X子集，X必含有码，即每一个决定因素必含有码）【不存在任何属性对候选码的传递函数依赖】在3NF基础上消除了主属性对码的部分函数依赖</p></li><li><p>（不考）4NF（在1NF基础上，对于R的每个非平凡多值依赖X→→Y且Y不是X的子集，X都含有码）</p></li></ul><p>（应试）掌握到3NF与BCNF即可，考题问是否能达到3NF</p><h3 id="★6-3-数据依赖的公理系统"><a href="#★6-3-数据依赖的公理系统" class="headerlink" title="★6.3 数据依赖的公理系统"></a>★6.3 数据依赖的公理系统</h3><p>Armstrong公理系统</p><ul><li>A1 自反律：若Y⊆X⊆U，则F逻辑蕴涵X→Y</li><li>A2 增广律：若F逻辑蕴涵X→Y，Z⊆U，则F逻辑蕴涵XZ→YZ</li><li>A3 传递律：若F逻辑蕴涵X→Y,Y→Z，则F逻辑蕴涵X→Z</li></ul><p>根据A1,A2,A3可得以下推理规则</p><ul><li>合并规则：若X→Y,X→Z，则X→YZ</li><li>分解规则：若X→Y,Z⊆Y，则X→Z</li><li>伪传递规则：若X→Y,WY→Z，则WX→Z</li></ul><p>引理：X→A1A2A3A4……Ak &lt;&lt;&lt;充分必要&gt;&gt;&gt; X→Ai成立（1&lt;i&lt;n）</p><p>Armstrong公理系统的有效性&amp;完备性</p><ul><li>有效性：由F出发，根据系统推导出来的每一个函数依赖一定在F+中</li><li>完备性：F+中的每一个函数依赖，必定可以由F触发根据系统推导出来</li></ul><p>函数依赖集的闭包：</p><ul><li>F为U上一组函数依赖，X⊆U，X在F上的闭包&#x3D;{A | X→A能由F根据Armstrong公理系统推导出}</li><li>引理6.2：X,Y⊆U,X→Y能由F根据Armstrong公理系统推导出 &lt;&lt;&lt;充分必要&gt;&gt;&gt; Y⊆X在F上的闭包</li></ul><p>函数依赖集的等价</p><ul><li>引理6.3 【F的闭包&#x3D;G的闭包】 &lt;&lt;&lt;充要条件&gt;&gt;&gt; 【F的闭包⊆G的闭包】 &amp;&amp; 【G的闭包⊆F的闭包】</li><li>判断是否【F⊆G的闭包】成立：逐一对F中的函数依赖X→Y，判断Y⊆（G+在X中的闭包）是否成立即可。</li></ul><p>★★★大题考察：</p><p>【书P187-189】</p><ul><li>求某个属性组X在F上的闭包（【做法】由X和组成X的元素去做扩散，看能推出哪些元素，自己自然是可以推出自己的）</li><li>判断该属性组X是否为候选码（闭包为全部属性的集合）（【做法】如果推出的元素就是全集，那这就是候选码）</li><li>（书上没有）求解关系的候选码（【思路】分为四类，L,R,LR,N，分别是只在左边出现，只在右边出现，左右都出现，左右都不出现，L和N必定是候选码中的属性，R必定不是，LR可能是）</li><li>判断两个函数依赖集是否等价（【做法】假设对F和G判定，对F中所有的X→Y都做X在G中的闭包，看看Y是不是被包含，然后同理可得G中也是，就能证明是不是等价的）</li><li>计算最小依赖集&#x2F;最小覆盖（【思路】①将右边拆成单个属性②试图将左边拆成单个属性：若AB→C，若C∈A在F中的闭包，则B冗余（剥夺B，不影响，B多余）③试图删除某个关系：若 A→B，若B∈A在{F删去A→B}的闭包，则该关系冗余（剥夺该关系，该关系的左值仍能推出右值，该关系冗余））</li><li>【具体做法】【图片】</li><li>检验F是否为最小依赖集（计算出来是自己）</li></ul><h2 id="7-数据库设计"><a href="#7-数据库设计" class="headerlink" title="7 数据库设计"></a>7 数据库设计</h2><h3 id="★7-1-数据库设计概述"><a href="#★7-1-数据库设计概述" class="headerlink" title="★7.1 数据库设计概述"></a>★7.1 数据库设计概述</h3><p>数据库一般设计过程</p><ul><li><strong>需求分析</strong>阶段：准确<strong>了解与分析用户需求（包括数据与处理）</strong>，需求分析如果不好可能会导致整个数据库重做。</li><li><strong>概念结构设计</strong>阶段：通过对用户需求进行综合、归纳与抽象，<strong>形成一个独立于具体数据库管理系统的概念模型</strong>。</li><li><strong>逻辑结构设计</strong>阶段：将概念结构转换为某个数据库管理系统所支持的<strong>数据模型</strong>，并对其进行<strong>优化</strong>。</li><li><strong>物理结构设计</strong>阶段：为逻辑数据模型选取一个最适合应用环境的<strong>物理结构（包括存储结构和存取方法）</strong>。</li><li><strong>数据库实施</strong>阶段：设计人员运用数据库管理系统提供的数据语言、工具及宿主语言，根据逻辑设计和物理设计的结果建立数据库，编制与调试应用程序，组织数据入库，并进行试运行。</li><li><strong>数据库运行和维护</strong>阶段：在数据库系统运行过程中对其进行评价、调整与修改。</li></ul><h3 id="7-2-需求分析"><a href="#7-2-需求分析" class="headerlink" title="7.2 需求分析"></a>7.2 需求分析</h3><p>数据字典，包括下列5项</p><ul><li><p>数据项：不可再分的数据单位</p></li><li><p>数据结构：反映数据项之间的组合关系。数据结构可由数据项&#x2F;数据结构混合组成。</p></li><li><p>数据流：数据结构在系统内传输的路径</p></li><li><p>数据存储：数据结构停留或保存的地方，也是数据流的来源和去向之一。</p></li><li><p>处理过程：判定表&#x2F;判定树</p></li></ul><h3 id="7-3-概念结构设计"><a href="#7-3-概念结构设计" class="headerlink" title="7.3 概念结构设计"></a>7.3 概念结构设计</h3><p>概念模型：①真实充分反映现实世界，②易于理解，③易于更改，④易于向关系模型，网状模型，层次模型等数据模型进行转换。</p><p>E-R模型：</p><p>实体之间的联系：</p><ul><li>两个实体型之间：一对一联系，一对多联系，多对多联系 </li><li>两个以上实体型：</li><li>单个实体型内：</li></ul><p>E-R图：</p><ul><li>实体型：矩形</li><li>属性：椭圆形</li><li>联系：菱形</li><li>无向边：需要标注联系的类型(1:1,1:m,m:n等)</li></ul><p>【考试：先画含属性的实体型图，再画一张不含属性但含联系的实体型图】</p><p>用E-R图进行概念结构设计：</p><ul><li>实体与属性划分原则：属性为①不可再分的数据项 ②与别的实体无联系</li></ul><p>E-R图集成：</p><ul><li>自顶向下需求分析，自底向上设计概念结构</li></ul><p>过程：</p><p>（1）合并E-R图，生成初步E-R图</p><ul><li>属性冲突：属性域冲突，属性取值单位冲突</li><li>命名冲突：同名异义，异名同义</li><li>结构冲突：①同一对象在不同应用中具有不同的抽象 ②同一实体在不同子系统的E-R图中包含的属性个数和次序不一致 ③……</li></ul><p>（2）消除不必要的冗余，设计基本E-R图</p><ul><li><p>分析法：【……不是考察重点，不再展开……】</p></li><li><p>规范化理论：【……不是考察重点，不再展开……】</p></li></ul><h3 id="7-4-逻辑结构设计"><a href="#7-4-逻辑结构设计" class="headerlink" title="7.4 逻辑结构设计"></a>7.4 逻辑结构设计</h3><p>E-R图向关系模型的转换</p><ul><li>1:1的联系：可以转换为一个独立的关系模式，也可以与任意一端对于的关系模式合并。</li><li>1:n的联系：可以转换为一个独立的关系模式，也可以与n端对应的关系模式合并。</li><li>m:n的联系：转换为一个独立的关系模式。各实体的码组成关系的码或关系码的一部分。</li><li>三个或三个以上实体间的一个多元联系可以转换为一个关系模式</li><li>具有相同码的关系模式可以合并</li></ul><p>数据模型的优化</p><p>以规范化理论为指导：【5条】</p><p>水平分解：把（基本）关系的元组分为若干子集合</p><p>垂直分解：把关系模式R的属性分解为若干子集合</p><h3 id="7-5-物理结构设计"><a href="#7-5-物理结构设计" class="headerlink" title="7.5 物理结构设计"></a>7.5 物理结构设计</h3><ul><li>物理结构：主要是存取方法和存取结构</li><li>对物理结构进行评价：时间&#x2F;空间效率</li></ul><p>数据库物理结构设计的内容和方法</p><p>选择关系模式存取方法</p><p>（1）B+树索引方法的选择</p><ul><li>一个&#x2F;一组属性经常在查询条件中出现，考虑在这个&#x2F;这组属性上建立索引</li><li>一个属性经常作为最大值和最小值等聚集函数的参数，考虑在这个属性上建立索引</li><li>一个&#x2F;一组属性经常在连接操作的连接条件中出现，考虑在这个&#x2F;这组属性上建立索引。</li></ul><p>维护索引要代价，索引不是越多越好</p><p>（2）哈希索引方法的选择</p><p>①大小可预知且不变，或②关系大小动态改变，但DBMS支持动态哈希索引方法</p><p>（3）聚簇方法的选择</p><p>提高某个属性（组）的查询速度，把这个或这些属性上具有相同值的元组集中存放在连续的物理块。该属性（组）称聚簇码。</p><p>设计候选聚簇【3条，略】</p><p>检查候选聚簇中的关系，取消不必要的关系【3条，略】</p><p>确定数据库的存储结构</p><ul><li>确定数据存放位置</li><li>确定系统配置</li></ul><p>评价数据库的物理结构：存储空间，存取时间，维护代价等</p><p>重组和重构</p><ul><li>数据库重组：不修改原设计的逻辑和物理结构</li><li>数据库重构：部分修改数据库的模式和内模式</li></ul><h3 id="7-6-数据库的实施和维护"><a href="#7-6-数据库的实施和维护" class="headerlink" title="7.6 数据库的实施和维护"></a>7.6 数据库的实施和维护</h3><p>数据的载入和应用程序的编码与调试</p><p>数据库的试运行</p><p>数据库的运行和维护</p><ul><li>数据库的转出和恢复</li><li>数据库的安全性&#x2F;完整性控制</li><li>数据库性能的监督，分析和改造</li><li>数据库的重组与重构：重组（不修改逻辑和物理结构），重构（部分修改数据库的模式和内模式）</li></ul><h2 id="【不考】8-数据库编程"><a href="#【不考】8-数据库编程" class="headerlink" title="【不考】8 数据库编程"></a>【不考】8 数据库编程</h2><h3 id="8-1-扩展SQL功能"><a href="#8-1-扩展SQL功能" class="headerlink" title="8.1 扩展SQL功能"></a>8.1 扩展SQL功能</h3><p>with子句</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>WITH RECURSIVE 子句</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>内置函数</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>通过高级语言实现复杂应用</p><h3 id="8-2-过程化SQL"><a href="#8-2-过程化SQL" class="headerlink" title="8.2 过程化SQL"></a>8.2 过程化SQL</h3><p>过程化SQL的基本结构</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>变量&#x2F;常量定义</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>流程控制：条件控制&#x2F;循环控制&#x2F;错误处理</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>存储过程：创建&#x2F;执行&#x2F;修改&#x2F;删除&#x2F;优点</p><pre class="line-numbers language-none"><code class="language-none"># 优点运行效率更高，降低了客户机和服务器间的通信量，方便实施企业规则<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>存储函数（必须指定返回类型）：创建&#x2F;执行&#x2F;修改</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token keyword">RETURNS</span> <span class="token operator">&lt;</span>类型<span class="token operator">></span><span class="token keyword">AS</span> <span class="token operator">&lt;</span>过程化<span class="token keyword">SQL</span>块<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="8-3-JDBC编程"><a href="#8-3-JDBC编程" class="headerlink" title="8.3 JDBC编程"></a>8.3 JDBC编程</h3><p>Java DataBase Connectivity</p><p>结构：用户应用程序，JDBC驱动程序管理器，数据源</p><p>使用JDBC操纵数据库的工作流程</p><ul><li>加载驱动程序</li><li>建立于数据库的连接</li><li>执行SQL语句</li><li>处理结果集</li><li>释放资源</li></ul><p>【书P263有完整案例】</p><h2 id="【不考】9-关系数据库存储管理"><a href="#【不考】9-关系数据库存储管理" class="headerlink" title="【不考】9 关系数据库存储管理"></a>【不考】9 关系数据库存储管理</h2><p>了解 B+树索引，哈希索引</p><h2 id="10-关系查询处理和查询优化"><a href="#10-关系查询处理和查询优化" class="headerlink" title="10 关系查询处理和查询优化"></a>10 关系查询处理和查询优化</h2><h3 id="10-1-关系数据库管理系统的查询处理"><a href="#10-1-关系数据库管理系统的查询处理" class="headerlink" title="10.1 关系数据库管理系统的查询处理"></a>10.1 关系数据库管理系统的查询处理</h3><p>查询处理步骤：</p><ul><li>查询分析（ 词法+语法），</li><li>查询检查（语义，符号名转换安全性，完整性，这一步生成语法树），</li><li>查询优化（代数优化：关系代数表达式的优化，物理优化：存取路径和底层操作算法的优化，生成查询执行计划），</li><li>查询执行（代码生成器生成具体代码）</li></ul><p>实现查询操作的算法：</p><p>选择操作：</p><ul><li>全表扫描算法</li><li>索引扫描算法</li><li>（选择率大小不同，效率不同，根据结果集来选择，如果结果集比较小，就用索引，否则全表扫描）</li></ul><p>连接操作：</p><ul><li>嵌套循环连接算法（假设内存最大M块，A表先读M-1块，B表先读1块，进行匹配，然后B表下一块，B表读完后，A表再继续下一个M-1块，直至全部结束），</li><li>排序合并连接算法（先对连接属性排序，然后对于同一个A表按顺序读B表，读到B表第一个连接属性不同的就返回A表读下一个），</li><li>索引连接算法（建立连接属性的索引，然后根据索引查找并连接），</li><li>哈希连接算法（划分&#x2F;创建阶段：以连接属性作为哈希码，把较小的表映射到桶中，试探&#x2F;连接阶段：另一个表进行散列，然后桶中再进行匹配）</li></ul><h3 id="10-2-关系数据库管理系统的查询优化"><a href="#10-2-关系数据库管理系统的查询优化" class="headerlink" title="10.2 关系数据库管理系统的查询优化"></a>10.2 关系数据库管理系统的查询优化</h3><p>查询优化：选择有效的策略，求得给定关系表达式的值，使得查询代价较小。</p><p>★一个实例P308【可考计算题】</p><h3 id="10-3-代数优化"><a href="#10-3-代数优化" class="headerlink" title="10.3 代数优化"></a>10.3 代数优化</h3><p>通过对关系代数表达式的等价变换来提高查询效率</p><p>关系代数表达式等价变换规则【书P309-310】</p><p>语法树的启发式优化【5条启发式规则】</p><p>★大题：画语法树，关系代数语法树，优化后的语法树</p><h3 id="10-4-物理优化"><a href="#10-4-物理优化" class="headerlink" title="10.4 物理优化"></a>10.4 物理优化</h3><p>可供选择的方法有</p><ul><li>基于启发式规则的优化</li><li>基于代价估算的优化</li><li>两者结合</li></ul><p>基于启发式规则的优化：</p><p>选择操作的启发式规则：</p><ul><li>小关系：用全表顺序扫描</li><li>大关系：</li><li>【5条】书P313</li></ul><p>连接操作的启发式规则：</p><ul><li>【4条】书P313</li><li>选用嵌套循环连接算法时，选择其中占用块数B较小的表作为外表</li></ul><p>基于代价估算的优化</p><p>【书P314】</p><h3 id="★本章重要简答题"><a href="#★本章重要简答题" class="headerlink" title="★本章重要简答题"></a>★本章重要简答题</h3><p>1.试述关系数据库管理系统查询优化的一般准则。</p><p>记忆：选择怎么样？投影怎么样？选择和投影可以怎么样？选择和笛卡尔积可以怎么样？公共子表达式？连接算法？</p><pre class="line-numbers language-none"><code class="language-none">（1）尽可能先做选择运算（2）投影运算和选择运算应同时进行（3）把投影和其前后的双目运算结合起来（4）把某些选择与在它前面要执行的笛卡尔积结合起来成为一个连接运算（5）找出公共子表达式（6）选取合适的连接算法<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.试述关系数据库管理系统查询优化的一般步骤。</p><p>记忆：画语法树，优化，存取路径，查询计划</p><pre class="line-numbers language-none"><code class="language-none">（1）把查询转换成某种内部表示，通常用的内部表示是语法树（2）利用优化算法，优化语法树（3）选择低层的存取路径（4）生成查询计划并选择其中代价最小的一种<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11-数据库恢复技术"><a href="#11-数据库恢复技术" class="headerlink" title="11 数据库恢复技术"></a>11 数据库恢复技术</h2><h3 id="11-1-事务的基本概念"><a href="#11-1-事务的基本概念" class="headerlink" title="11.1 事务的基本概念"></a>11.1 事务的基本概念</h3><p>事务（transaction）：用户定义的一个数据库操作序列，不做或全做，这个工作单位不可分割。</p><p>显式定义事务</p><pre class="line-numbers language-aql" data-language="aql"><code class="language-aql">BEGIN TRANSACTION<span class="token punctuation">;</span>COMMIT<span class="token punctuation">;</span><span class="token comment">//正常结束，提交，所有更新写回物理数据库</span>ROLLBACK<span class="token punctuation">;</span><span class="token comment">//发生错误，回滚，事务中发生的操作全部撤销</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>★事务的ACID特性</p><ul><li>原子性(atomicity)：事务中的操作要么不做要么全做。</li><li>一致性(consistency)：事务执行的结果必须使数据库从一个一致性状态转移到另一个一致性状态。即完整性。</li><li>隔离性(isolation)：一个事务的执行不能被其它事务干扰。</li><li>持续性(durability)：一个事务一旦提交，它对数据库中数据的改变是永久性的，接下来其它操作或故障不会对它的执行结果造成影响。</li></ul><p>事务ACID遭破坏的可能因素：</p><ul><li>多个事务并行运行，不同事务的操作交叉执行（并发控制机制）</li><li>事务在运行过程中被强行停止（恢复机制）</li></ul><h3 id="★11-3-故障的种类"><a href="#★11-3-故障的种类" class="headerlink" title="★11.3 故障的种类"></a>★11.3 故障的种类</h3><ul><li>事务内部的故障：事务没有到达预期的终点（COMMIT或显式ROLLBACK）</li><li>系统故障：（软故障）造成系统停止运转，系统要重新启动（尚未完成的数据送入物理数据库，破坏原子性&#x2F;一致性；内存&#x2F;缓冲区数据丢失，破坏事务持续性）</li><li>介质故障：（硬故障）外存故障：磁盘损坏，磁头碰撞，瞬间强磁场干扰，破坏硬盘数据的计算机病毒等。</li></ul><h3 id="11-4-数据库恢复的实现技术"><a href="#11-4-数据库恢复的实现技术" class="headerlink" title="11.4 数据库恢复的实现技术"></a>11.4 数据库恢复的实现技术</h3><ul><li>本质：建立冗余数据</li><li>方法：数据转储（dump）和登记日志文件</li></ul><p>分类：</p><ul><li><p>事务故障&amp;系统故障：记录事务更新对象旧值和新值（日志文件），回滚未提交的事务（恢复为旧值），重做已提交的事务（更新为新值），（日志logging技术）</p></li><li><p>介质故障：重载备份（数据备份backup技术）</p></li></ul><p>数据转储（数据备份backup技术）</p><ul><li><p>静态备份：备份开始时处于一致性状态，且没有事务正在进行（优：实现简单；缺：必须等待事务结束，新事务等待备份结束）</p></li><li><p>动态备份：备份操作与用户事务并发进行（优：不用等待结束，不会影响新事务进行；缺：仅依靠后备副本无法保证数据有效）</p></li><li><p>全量备份</p></li><li><p>增量备份</p></li></ul><p>登记日志文件（日志logging技术）</p><ul><li><p>Undo日志：先写日志，后写数据，最后写提交标记</p></li><li><p>Redo日志：先写日志，再写提交标记，最后写数据</p></li><li><p>Undo&#x2F;Redo日志：先写日志，后写数据</p></li></ul><p>★为什么要先写日志，后写数据？</p><ul><li>这两者之间可能发生故障，若先写日志后发生故障，恢复时多做一次不必要的Undo操作，不会影响数据库正确性。若先写数据后发生故障，因为没有日志所以无法恢复。</li></ul><h3 id="★11-5-恢复策略"><a href="#★11-5-恢复策略" class="headerlink" title="★11.5 恢复策略"></a>★11.5 恢复策略</h3><p>事务故障：</p><ul><li>因为只是该事务发生的故障</li><li>反向扫描日志文件，对该事务的更新操作做逆操作，直到读到此事务的开始标记</li></ul><blockquote><p><strong>【因为版权问题以及课件的保密协议这里有2张图片不能放】</strong></p></blockquote><p>系统故障：</p><ul><li><p>正向扫描日志文件，找出故障发送前已提交的事务（有BEGIN TRANSACTION 和 COMMIT），放入REDO-LIST。找出故障时尚未完成的事务（只有BEGIN TRANSACTION 但无 COMMIT），放入UNDO-LIST。</p></li><li><p>对UNDO-LIST中的事务做撤销（反向扫描日志文件，对每个更新操作做逆操作，即“更新前的值”写入数据库）</p></li><li><p>对REDO-LIST中的事务做重做（正向扫描日志文件，重新执行日志文件登记操作，即“更新后的值”写入数据库）</p></li></ul><blockquote><p><strong>【因为版权问题以及课件的保密协议这里有2张图片不能放】</strong></p></blockquote><p>介质故障：</p><ul><li>装入最新数据库后备副本，恢复数据库到最近的一致状态</li><li>装入相应的日志文件副本，重做已完成的事务</li></ul><blockquote><p><strong>【因为版权问题以及课件的保密协议这里有2张图片不能放】</strong></p></blockquote><h3 id="★11-6-具有检查点的恢复技术"><a href="#★11-6-具有检查点的恢复技术" class="headerlink" title="★11.6 具有检查点的恢复技术"></a>★11.6 具有检查点的恢复技术</h3><p>问题：搜索整个日志很耗时，重新执行浪费大量时间，日志存储代价很大。为了解决这个问题，新增检查点。</p><p>检查点记录{①建立检查点时刻所有正在执行的事务清单 ②这些事务最近一个日志记录的地址}</p><p>重新开始文件：存放各个检查点在日志文件中的地址</p><blockquote><p><strong>【因为版权问题以及课件的保密协议这里有1张图片不能放】</strong></p></blockquote><p>利用检查点恢复的步骤：</p><ul><li>从“重新开始文件”中找到最后一个“检查点记录”的地址，在日志文件中找到最后一个“检查点记录”。</li><li>建立事务队列UNDO-LIST和REDO-LIST，检查点时的ACTIVE-LIST初始放入UNDO-LIST</li><li>正向扫描直至结束：若某任务START，放入UNDO-LIST；若某任务COMMIT，放入REDO-LIST</li><li>对UNDO-LIST中的事务，从结束逆向到最后检查点开始做UNDO，但对于在检查点记录中的ACTIVE事务，要继续回推到该事务的START（总结，UNDO-LIST中的事务都要完整从结束反推回START）</li><li>对REDO-LIST中的事务，从最后检查点开始正向扫描，对每一条做REDO</li></ul><p>具体案例：</p><blockquote><p><strong>【因为版权问题以及课件的保密协议这里有2张图片不能放】</strong></p></blockquote><h3 id="11-7-数据库镜像（了解）"><a href="#11-7-数据库镜像（了解）" class="headerlink" title="11.7 数据库镜像（了解）"></a>11.7 数据库镜像（了解）</h3><p>复制主数据库到别的地方，可以同时便利并发操作的读取。</p><h2 id="12-并发控制"><a href="#12-并发控制" class="headerlink" title="12 并发控制"></a>12 并发控制</h2><p>单处理机系统中，事务的并行执行实际上是这些并发事务的并行操作轮流交叉运行。称为：交叉并发方式。</p><h3 id="12-1-并发控制概述"><a href="#12-1-并发控制概述" class="headerlink" title="12.1 并发控制概述"></a>12.1 并发控制概述</h3><p>事务是并发控制的基本单位。目标是保证事务的隔离性和一致性。</p><p>并发操作带来的不一致性主要有：</p><ul><li>丢失修改（T1和T2读入同一数据各自修改，T2的提交破坏了 T1的修改，导致T1的修改被丢失）</li><li>脏读（T1提交的数据被T2读取后又被撤销，此时T2读到的数据就是脏的，即不正确的）</li><li>不可重复读（T1读取数据后，T2对记录中的数据更新，使得T1再次读取时得到与之前不一致的值）</li><li>幻读（T1读取数据后，T2对部分记录插入或删除，使得T1再次读取时发现一些记录小时了或者多出来了）</li></ul><p>并发控制的主要技术：封锁（locking），时间戳（timestamp），乐观方法，多版本并发控制</p><h3 id="12-2-事务的隔离级别"><a href="#12-2-事务的隔离级别" class="headerlink" title="12.2 事务的隔离级别"></a>12.2 事务的隔离级别</h3><p>由低到高（数据一致性增强，系统代价增高）：</p><ul><li>读未提交：允许一个事务读取另一个未提交事务正在修改的数据（避免丢失修改）</li><li>读已提交：只允许一个事务读取一个已提交的数据（避免丢失修改，避免脏读）</li><li>可重复读：一个十五开始读取数据后，其他事务就不能再对该数据执行更新操作（避免丢失修改，避免脏读，避免不可重复读）</li><li>可串行化：事务执行顺序可串行化（避免所有）</li></ul><h3 id="12-3-封锁"><a href="#12-3-封锁" class="headerlink" title="12.3 封锁"></a>12.3 封锁</h3><p>封锁：事务T对某个数据对象操作前先向系统申请加锁</p><p>基本封锁类型：</p><ul><li>排他型锁（X锁）：写锁，只允许事务T读取修改A，不允许别的事务加锁。</li><li>共享型锁（S锁）：读锁，允许事务T读取A不能修改A，允许别的事务加S锁但不能X锁。</li></ul><p>相容矩阵：只有S锁和S锁自己可相容，另：空跟别的都可相容</p><h3 id="12-4-封锁协议"><a href="#12-4-封锁协议" class="headerlink" title="12.4 封锁协议"></a>12.4 封锁协议</h3><p>三级封锁协议：定义何时申请锁，持续时间，何时释放</p><ul><li>一级封锁协议：长写锁。事务T修改数据R前加X锁，事务结束后释放。（【没有丢失修改】不保证不脏读，不保证可重复读）</li><li>二级封锁协议：长写锁+短读锁。在一级协议上，新增：事务T读数据R前加S锁，读完就可释放。（【不脏读】不保证可重复读）</li><li>三级封锁协议：长写锁+长读锁。在一级协议上，新增：事务T读数据R前加S锁，事务结束才可释放。【可重复读】</li></ul><h3 id="12-5-活锁和死锁"><a href="#12-5-活锁和死锁" class="headerlink" title="12.5  活锁和死锁"></a>12.5  活锁和死锁</h3><p>活锁</p><p>原因：多个事务请求同一个，但有可能先允许了后面的事务，导致前面的事务一直等待，饿死。</p><p>解决方法：采取先来先服务的策略</p><p>死锁</p><p>原因：T1和T2各自封锁对方想要获得的资源，并同时请求自己想要获得的资源</p><p>死锁的预防；</p><ul><li>一次封锁法：一次性将所有数据全部加锁</li><li>顺序封锁法：预先规定封锁顺序，所有事务都按照这个顺序封锁。</li></ul><p>死锁的诊断与解除：</p><ul><li>超时法：超过规定时间就认为发生了死锁</li><li>事务等待图法：有向图，节点为事务，边指向等待的事务，若出现回路，则存在死锁</li></ul><h3 id="12-6-并发调度的可串行性"><a href="#12-6-并发调度的可串行性" class="headerlink" title="12.6 并发调度的可串行性"></a>12.6 并发调度的可串行性</h3><p>调度不同，可能结果不同，存在一种正确调度。</p><ul><li><p>串行调度：（串行调度的并发执行必然是正确的）</p></li><li><p>可串行化调度：这种调度方式产生的结果与某次串行调度产生的结果相同。（可串行化调度的并发执行是正确的）</p></li><li><p>冲突可串行化调度：这种调度在保证冲突操作次序不变的情况下，通过交换两个事务不冲突操作的次序得到的另一个调度是串行的，则该事务是冲突可串行化的，也必然是可串行化的（充分条件：冲突可串行化→可串行化）</p></li><li><p>冲突操作：不同事务对同一数据的读写&#x2F;写写操作</p></li><li><p>【不同事务的冲突操作】和【同一事务的两个操作】顺序不能互换</p></li></ul><p>做题：判断一个调度是否冲突可串行化调度？在规则允许的范围内尽可能交换事务中各语句的次序，使得事务能尽可能分离开来，变成串行的，如果能办到，就是冲突可串行化调度。</p><p>【期末考试8分】例题：R3(B)R1(A)W3(B)R2(B)R2(A)W2(B)R1(B)W1(A)，该调度是冲突可串行化的调度吗？为什么？</p><p>对原式中R1(A)依次与右边的邻居交换最终得到R3(B)W3(B)R2(B)R2(A)W2(B)R1(A)R1(B)W1(A)这是一个串行调度，故原调度是冲突可串行化调度。</p><h3 id="12-7-两段锁协议"><a href="#12-7-两段锁协议" class="headerlink" title="12.7 两段锁协议"></a>12.7 两段锁协议</h3><p>为了保证调度可串行化，使用两段封锁（two-phase lock，2PL）来实现可串行化。</p><p>遵守两段锁协议的一定是可串行化的。</p><p>所有事务必须分两个阶段对数据项加锁和解锁（读写之前申请封锁，释放锁后，不再申请和获得封锁）</p><ul><li>扩展阶段：获得封锁</li><li>收缩阶段：释放封锁</li></ul><p>★一次封锁法&lt;&gt;两段锁协议</p><p>一次封锁法遵守两段锁协议，但两段锁协议不要求一次封锁，故两段锁协议仍然可能发生死锁</p><h3 id="12-8-封锁的粒度"><a href="#12-8-封锁的粒度" class="headerlink" title="12.8 封锁的粒度"></a>12.8 封锁的粒度</h3><p>封锁粒度：封锁对象的大小（可以是逻辑单元：属性值，属性值集合，元组，关系，索引项，整个索引，整个数据库；物理单元：数据页，索引页；物理记录等）</p><p>封锁粒度↑，并发度↓，系统开销↓</p><p>多粒度封锁</p><p>多粒度树（根节点表示整个数据库，往下层次依次关系，元组等）</p><p>多粒度封锁协议：允许该树中的每个节点被独立加锁，加一个节点的锁时，其子树上的节点都加锁</p><ul><li><p>显式封锁：直接加到该节点的锁</p></li><li><p>隐式封锁：由于其上级节点被加锁而被加锁</p></li></ul><p>意向锁：表明该节点的子树上的节点正在被加锁。对任意节点加锁时，其所有上层节点都要加意向锁。</p><ul><li>意向共享型锁（IS）：其子树上的节点想加S锁</li><li>意向排他型锁（IX）：其子树上的节点想加X锁</li><li>共享意向排他型锁（SIX锁）：先加S锁再加IX锁</li><li>SIX例子：对某个表加SIX锁，读取整个表，但更新部分元组。</li><li>锁的强度关系：X&gt;SIX&gt;S,IX&gt;IS</li></ul><p>具有意向锁的多粒度封锁方法，提高了系统并发度，减少了加锁和解锁开销。</p><h1 id="【期末考试复习】"><a href="#【期末考试复习】" class="headerlink" title="【期末考试复习】"></a>【期末考试复习】</h1><p>【老师提供】数据库系统期末考试复习提纲（2023）</p><p>第一章 绪论</p><p>1.1 数据库的 4 个基本概念（数据、数据库、数据库管理系统和数据库系统）</p><ul><li><p>数据，是描述事物的符号记录。</p></li><li><p>数据库（DB），是长期存储在计算机内、有组织、可共享的大量数据的集合。</p></li><li><p>数据库管理系统（DBMS），位于用户与OS之间的数据管理软件。</p></li><li><p>数据库系统（DBS），是由DB、DBMS及其应用开发工具、应用程序和DBA组成的存储、管理、处理和维护数据的系统。</p></li></ul><p>1.2 数据库系统的特点、数据库系统与文件系统的区别与联系</p><ul><li>特点：数据共享性高，冗余度低且易扩充，独立性高，整体数据的结构化。</li><li>联系：文件系统和数据库系统都用于存储和管理数据</li></ul><p>1.3 数据模型及三要素</p><ul><li>数据模型：对现实世界数据特征的抽象</li><li>三要素：数据结构，数据操作，完整性约束</li><li>数据结构：描述数据库的组成对象以及对象之间的联系。</li><li>数据操作：对数据库中各种对象的实例允许执行的操作的集合，包括操作及有关的操作规则。</li><li>完整性约束：一组完整性规则。</li></ul><p>1.4 数据库系统的三级模式结构（外模式、模式、内模式）</p><p>数据库的二级映像功能与数据独立性（逻辑独立性、物理独立性）</p><p>第二章 关系数据库</p><p>2.1 码、主属性、非主属性、外码</p><p>2.2 关系代数 并、差、交、笛卡尔积、选择、投影、连接、除运算。</p><p>2.3 关系代数查询及关系运算</p><p>第三章 关系数据库标准语言 SQL</p><p>3.1 SQL 的基本概念，基本表、视图。</p><p>3.2 基本表及视图的定义、查询、更新</p><p>3.3 数据查询: 常用的 SQL 语句，常用的查询、修改、删除、分组、排序等 SQL 语句</p><p>3.4 能熟练使用聚集函数、通配符</p><p>3.5 多表连接查询、复合条件连接查询、嵌套查询</p><p>3.6 数据更新 插入数据、修改数据、删除数据</p><p>第四章 数据库安全性</p><p>4.1 数据库的安全性</p><ul><li>保护数据库，以防不合法使用所造成的数据泄露，篡改或破坏</li></ul><p>4.2 实现数据库安全性控制常用的方法和技术</p><p>4.3 掌握用户、角色的创建及授权和收回权限</p><p>第五章 数据库的完整性</p><p>5.1 数据库的完整性</p><ul><li>数据库的正确性和相容性</li></ul><p>5.2 实体完整性、参照完整性、用户定义完整性</p><p>第六章 关系数据理论</p><p>6.1 对函数依赖、码、主属性、非主属性、外码等有深入的理解</p><p>6.2 掌握关系模式的基本函数依赖、关系模式的候选码</p><p>6.2 掌握规范化理论，能够判断给定关系模式的规范化程度</p><p>6.3 掌握模式的分解,能够按要求对给定关系模式进行分解，修改为符合更高一级的范式</p><p>第七章 数据库设计</p><p>7.1 掌握数据库的一般设计过程及每个阶段的主要任务。</p><ul><li>需求分析：明确用户对数据库的需求</li><li>概念结构设计：设计独立于具体DBMS的概念模型</li><li>逻辑结构设计：根据概念模型转换得到具体的DBMS逻辑模型</li><li>物理结构设计：设计存储结构和存储路径</li><li>数据库实施：</li><li>数据库运行和维护：</li></ul><p>7.2 根据语义设计系统的 E-R 图，并将 E-R 图转换为关系模式（写出关系名称和所有属性）</p><p>7.3 对数据库设计方面有自己独到的理解</p><ul><li>【猜测】可扩展性：数据库模块化，数据库模块可变更的能力</li></ul><p>第九章 关系查询处理和查询优化</p><p>9.1 理解关系数据库系统查询优化的主要规则及步骤</p><ul><li>记忆（主要规则）：选择怎么样？投影怎么样？选择和投影可以怎么样？选择和笛卡尔积可以怎么样？公共子表达式？连接算法？</li><li>记忆（步骤）：画语法树，优化，存取路径，查询计划</li></ul><p>9.2 了解代数优化、物理优化</p><ul><li>代数优化：对关系代数表达式的优化，按照一定规则对关系代数表达式进行等价变换，改变操作的组合及次序，提高查询效率</li><li>物理优化：对存取路径和底层操作算进行优化</li></ul><p>第十章 数据库恢复技术</p><p>10.1 对事务的基本概念及事务的 ACID 特性有一定的理解和掌握</p><p>【事务】</p><p>10.2 理解数据库系统中故障的种类</p><ul><li>事务，介质，系统</li></ul><p>10.3 掌握数据库恢复技术（数据转储或数据备份、登记日志文件）</p><p>10.4 掌握并能熟练使用具有检查点的恢复技术。</p><ul><li>【推测考大题】</li></ul><p>第十一章 并发控制</p><p>11.1 并发控制及并发操作带来的数据不一致性</p><ul><li>丢失修改，脏读，不可重复读</li></ul><p>11.2 封锁技术及基本封锁类型（排他锁和共享锁）、三级封锁协议</p><p>11.3 活锁和死锁，死锁的预防、诊断与解除</p><p>11.4 可串行化调度及两段锁协议，判断一个并发调度是不是冲突可串行化调度。</p><p>【两段锁协议】</p><p>11.5 了解封锁粒度及多粒度封锁。</p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>这个夏天，我与保研</title>
      <link href="/2024/09/30/bao-yan/"/>
      <url>/2024/09/30/bao-yan/</url>
      
        <content type="html"><![CDATA[<h1 id="保研记录"><a href="#保研记录" class="headerlink" title="保研记录"></a>保研记录</h1><p>谨以此帖记录近三个月以来的见闻，为这三年的努力画上一个圆满的句号。</p><p>【由于跟院校签了协议，所以有些地方不能写出来，如果你确实想去报考这个院校的话，请私下跟我联系，或者之后可能会单独出一个帖子讲这些题目】</p><p>之后会出一期专门讲我觉得该如何准备推免，这一期主要是我本人的个人经历，所以可能没有那么多系统性的干货。</p><p>但还是要推荐一下绿群QQ（吃水不忘挖井人）943826679</p><h2 id="本人定位"><a href="#本人定位" class="headerlink" title="本人定位"></a>本人定位</h2><ul><li>末九cs rk1&#x2F;140+ （推免遴选rk3，故可能会有冲突）</li><li>成绩：具体的分数不重要，主要还是看rk</li><li>英语：CET4：600+；CET6:：600+</li><li>编程：CSP：前6%</li><li>奖学金：连续两年国奖</li><li>竞赛获奖：有数模、数竞、蓝桥杯水奖</li><li>科研项目：两个水项目，无科研产出</li></ul><h2 id="最终去向"><a href="#最终去向" class="headerlink" title="最终去向"></a>最终去向</h2><p><img src="/Bao-Yan/baoyan-1.jpeg" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><h2 id="情况总览"><a href="#情况总览" class="headerlink" title="情况总览"></a>情况总览</h2><p>参营院校</p><table><thead><tr><th>院校</th><th>入营</th><th>优营效力</th><th>结果</th><th>实际获得</th><th>操作</th></tr></thead><tbody><tr><td>同济电院</td><td>夏令营入营</td><td>仅排序</td><td>优营40+&#x2F;92</td><td>学硕offer</td><td>928放弃</td></tr><tr><td>成电计院</td><td>夏令营入营</td><td>双选后铁offer</td><td>优营40+&#x2F;100</td><td>学硕offer</td><td>905放弃</td></tr><tr><td>人大信院</td><td>夏令营入营</td><td>仅排序</td><td>优营30+&#x2F;72</td><td>wl</td><td>929-11点补到&#x2F;放弃</td></tr><tr><td>上交电院</td><td>夏令营入营</td><td>仅排序</td><td>优营100+&#x2F;123</td><td>wl（后放弃）</td><td>919放弃</td></tr><tr><td>中山计院</td><td>夏令营入营</td><td>铁offer</td><td>优营30+&#x2F;400+</td><td>学硕offer</td><td>926放弃</td></tr><tr><td>国防科大计院</td><td>夏令营入营</td><td>仅排序</td><td>优营170&#x2F;467</td><td>硕士offer</td><td>904放弃</td></tr><tr><td>南大计院</td><td>预推免入营</td><td>铁offer</td><td>预推免批次wl</td><td>wl（927候补到专硕offer）</td><td>拒绝录取</td></tr><tr><td>清华软院</td><td>预推免入营</td><td>铁offer</td><td>初步录取</td><td>专硕offer</td><td>最终去向</td></tr><tr><td>浙大工院</td><td>预推免候补入营</td><td>铁offer</td><td>总批次wl前10</td><td>wl</td><td>928未填系统，默认放弃</td></tr><tr><td>湖大信院</td><td>预推免入营</td><td>铁offer</td><td>预推免批次前5（offer）</td><td>学硕offer</td><td>928未填系统，默认放弃</td></tr></tbody></table><p>考虑院校</p><p>（空格处表示没有考虑或没有交集，情况包含了一些自己打听获取到的信息）</p><table><thead><tr><th>层次</th><th>院校</th><th>夏令营</th><th>预推免</th><th>情况</th></tr></thead><tbody><tr><td>清北</td><td>清华叉院</td><td></td><td>不开</td><td>不敢想</td></tr><tr><td></td><td>清华计系</td><td></td><td></td><td>不敢想</td></tr><tr><td></td><td>清华AI</td><td></td><td>不开</td><td>不敢想</td></tr><tr><td></td><td>清华软院</td><td></td><td>入营优营</td><td>不敢想，但最终去向</td></tr><tr><td></td><td>清深计科</td><td></td><td>未过初筛</td><td>我错过时间未投递。一位持有rk1投递，优营，据说只发19个优营，含金量非常高。</td></tr><tr><td></td><td>清深AI</td><td>未过初筛</td><td>未投递</td><td>三位持有rk1投递，均未通过</td></tr><tr><td></td><td>清深大数据</td><td>未过初筛</td><td>未过初筛</td><td>两位持有rk1投递，均未通过</td></tr><tr><td></td><td>北大叉院</td><td></td><td></td><td>不敢想</td></tr><tr><td></td><td>北大计院</td><td></td><td></td><td>不敢想</td></tr><tr><td></td><td>北大AI</td><td></td><td></td><td>不敢想</td></tr><tr><td></td><td>北深信工</td><td></td><td></td><td>没投递</td></tr><tr><td></td><td>北大软微</td><td>初筛过，论文筛寄</td><td></td><td>6.20晚给通知要读论文，6.28没给邮件，默拒</td></tr><tr><td>华五</td><td>南大计院</td><td>初筛过，线上机考寄</td><td>wl</td><td>预推免的bar更低，更容易拿优营或者前排wl</td></tr><tr><td></td><td>南大AI</td><td>未过初筛</td><td></td><td>四位持有rk1投递，教务打电话询问，后称“没关系的”，均未通过</td></tr><tr><td></td><td>南大软院</td><td>过初筛</td><td>与南计冲突，只可去一个</td><td>和人大信院&#x2F;成电冲突，放弃</td></tr><tr><td></td><td>南大智科（苏州）</td><td>与南软冲突，放弃</td><td>与南计冲突，只可去一个</td><td>难度大，本校入营同学未获得优营</td></tr><tr><td></td><td>复旦计院</td><td>未过初筛</td><td>未过初筛</td><td>被双杀，离谱。bar特别高，本专业只放rk1入营，本校其他专业的rk1最终候补到了学硕，身边其他人都没过</td></tr><tr><td></td><td>复旦大数据</td><td></td><td></td><td>复旦只可投递一个，冲突。本专业持有rk1优营。</td></tr><tr><td></td><td>复旦类脑</td><td></td><td></td><td>复旦只可投递一个，冲突。</td></tr><tr><td></td><td>上交电院（计算机系）</td><td>入营</td><td>不开</td><td>机考50%+面试50%</td></tr><tr><td></td><td>上交电院（软件）</td><td>冲突</td><td></td><td>放本专业和软件rk1入营。据说要读论文，机试非常难。</td></tr><tr><td></td><td>上交AI院</td><td></td><td></td><td>第一年开，bar特别高，只放985纯计科rk1（华五多放几个）进。但很容易优营。机试非常简单，据说还有很社死的做游戏环节。927被鸽穿。</td></tr><tr><td></td><td>浙大计院</td><td>只开直博</td><td></td><td>感觉不配，太看科研</td></tr><tr><td></td><td>浙大软院</td><td>入营放弃</td><td></td><td>感觉不值，要做项目</td></tr><tr><td></td><td>浙大工院</td><td></td><td>候补入营+wl</td><td>夏令营&#x2F;预推免只能进一个。候补能到</td></tr><tr><td></td><td>浙大大数据</td><td></td><td></td><td>在海宁</td></tr><tr><td></td><td>中科大计院（11系）</td><td></td><td></td><td>应该能进，但是没投递</td></tr><tr><td></td><td>中科大信院（6系）</td><td>未过初筛</td><td>未过初筛</td><td>只放了核心rk1入营。</td></tr><tr><td></td><td>中科大AI与大数据</td><td>不可兼报</td><td></td><td>bar应该很高，而且要双选才有效。</td></tr><tr><td></td><td>中科大先研院</td><td>不可兼报</td><td></td><td>不值</td></tr><tr><td></td><td>中科大苏高院</td><td></td><td></td><td>不值</td></tr><tr><td></td><td>人大高瓴</td><td></td><td>不开</td><td>本校无人入营</td></tr><tr><td></td><td>人大信院</td><td>wl</td><td>不开</td><td>本校学硕入营1人，专硕入营2人</td></tr><tr><td>C9</td><td>哈工深计院</td><td>未过初筛</td><td>与南计冲突，拒绝</td><td>夏令营只放40人入营，教务称“生源质量很好”，预推免开了三批，显然被鸽穿</td></tr><tr><td></td><td>哈工本计院</td><td></td><td></td><td>不想去北方（最后还是去了）</td></tr><tr><td></td><td>哈工威计院</td><td></td><td></td><td>不值</td></tr><tr><td></td><td>西交计院</td><td>宣讲营</td><td></td><td>弱com，与老师谈好即可，预推免走形式即可。</td></tr><tr><td></td><td>西交软院</td><td></td><td></td><td>不值</td></tr><tr><td>985</td><td>同济电院</td><td>优营</td><td></td><td>bar很高，只放rk1，人称“小复旦”，优营率高且稳，适合高rk用来保底</td></tr><tr><td></td><td>同济软院</td><td></td><td></td><td>优营无效力，直通预推免</td></tr><tr><td></td><td>同济无人系统中心</td><td></td><td></td><td>出的太晚，已报电院</td></tr><tr><td></td><td>北航计院</td><td>宣讲营</td><td>929面试</td><td>没感觉</td></tr><tr><td></td><td>武大计院</td><td>入营放弃</td><td></td><td>与sjtu冲突，放弃。优营率很高。</td></tr><tr><td></td><td>武大国重</td><td></td><td></td><td>优营率低，本校无人优营。</td></tr><tr><td></td><td>华科计院</td><td>只招直博</td><td></td><td>已有同济优营</td></tr><tr><td></td><td>华科AI院</td><td></td><td></td><td></td></tr><tr><td></td><td>东南电院</td><td></td><td></td><td>已有同济优营</td></tr><tr><td></td><td>中山计院</td><td>优营</td><td></td><td>稳保底</td></tr><tr><td></td><td>电科计院</td><td>优营</td><td></td><td>夏令营发100优营，据说分组打分差异大</td></tr><tr><td></td><td>南开计院</td><td></td><td></td><td></td></tr><tr><td></td><td>南开软院</td><td></td><td></td><td></td></tr><tr><td></td><td>南开AI院</td><td></td><td></td><td></td></tr><tr><td></td><td>天大计院</td><td></td><td></td><td></td></tr><tr><td></td><td>北理计院</td><td></td><td></td><td></td></tr><tr><td></td><td>北理叉院</td><td></td><td></td><td></td></tr><tr><td></td><td>山大计&#x2F;AI院</td><td>宣讲</td><td></td><td></td></tr><tr><td></td><td>山大软院</td><td>宣讲</td><td></td><td></td></tr><tr><td></td><td>山大数据科学</td><td></td><td></td><td></td></tr><tr><td></td><td>华东师大计院</td><td>未入营</td><td></td><td>神奇bar，本校唯一rk1未入营，据说要联系导师</td></tr><tr><td></td><td>华东师大软院</td><td>未入营</td><td></td><td>本校rk1入营，以rk3投递未入营</td></tr><tr><td></td><td>华东师大数据科学与工程学院</td><td></td><td></td><td></td></tr><tr><td></td><td>厦大信院</td><td>未入营</td><td></td><td>唯一rk1投递未入营（总不能是oq了吧），似乎要联系导师（但是老师都不回复）</td></tr><tr><td></td><td>厦大AI院</td><td></td><td></td><td>需要厦大老师推荐信（但是老师都不回复）</td></tr><tr><td></td><td>中南计院</td><td></td><td></td><td></td></tr><tr><td></td><td>北师AI院</td><td></td><td></td><td>感觉可以旅游营，但是太累了，不想再去一次北京了，遂没报。</td></tr><tr><td></td><td>西工计院</td><td></td><td></td><td></td></tr><tr><td></td><td>西工软院</td><td></td><td></td><td></td></tr><tr><td></td><td>川大计院</td><td></td><td></td><td>硬控5天，太难受，遂没报</td></tr><tr><td></td><td>川大国重</td><td></td><td></td><td>入营20人，约招8人，后来发现其实可以投着试试的，挺可惜。本校有人去了这个，应该拿到了优营。</td></tr><tr><td></td><td>华南理工软院</td><td></td><td></td><td></td></tr><tr><td></td><td>东北计院</td><td></td><td></td><td></td></tr><tr><td></td><td>东北软院</td><td></td><td></td><td></td></tr><tr><td></td><td>吉大计院</td><td></td><td></td><td></td></tr><tr><td></td><td>吉大软院</td><td></td><td></td><td></td></tr><tr><td></td><td>吉大AI院</td><td></td><td></td><td></td></tr><tr><td></td><td>重大计院</td><td></td><td></td><td></td></tr><tr><td></td><td>重大卓工</td><td></td><td></td><td></td></tr><tr><td></td><td>大工计院</td><td></td><td></td><td></td></tr><tr><td></td><td>大工软院</td><td></td><td></td><td></td></tr><tr><td></td><td>湖大信息</td><td>入营放弃</td><td>优营</td><td></td></tr><tr><td></td><td>国防科大计院</td><td></td><td></td><td></td></tr><tr><td>211</td><td>北邮计院</td><td></td><td></td><td></td></tr><tr><td></td><td>北邮AI</td><td></td><td></td><td></td></tr><tr><td></td><td>西电</td><td></td><td></td><td></td></tr><tr><td>研究院所</td><td>中科院计算所</td><td></td><td></td><td>未报名，感觉不配</td></tr><tr><td></td><td>中科院自动化所</td><td>入营放弃</td><td></td><td>入营，紫东初阳大模型研究中心推荐我入营的，该中心2022年成立。当时太累了放弃了。</td></tr><tr><td></td><td>中科院软件所</td><td></td><td></td><td>未入营，感觉只招软件，同校软件很多入的，应该是筛软件了</td></tr><tr><td></td><td>中科院信工所</td><td></td><td></td><td></td></tr><tr><td></td><td>中科院深先所</td><td></td><td></td><td>神仙所，感觉不配</td></tr><tr><td></td><td>中科院杭高院</td><td></td><td></td><td></td></tr><tr><td></td><td>中科院上高院</td><td></td><td></td><td></td></tr></tbody></table><h2 id="夏令营"><a href="#夏令营" class="headerlink" title="夏令营"></a>夏令营</h2><p>总结：基本符合预期，拿下了中九的保底offer。sjtu的机会出乎意料。为预推免冲华五奠定了良好的基础。</p><h3 id="6-28-同济电院"><a href="#6-28-同济电院" class="headerlink" title="6.28 同济电院"></a>6.28 同济电院</h3><p>时间线：</p><ul><li>6.28 报到</li><li>6.29 机试+笔试+专业英语</li><li>6.30 面试+面试英语</li><li>7.5 优营结果公示，有优营</li><li>9.10 告知老师放弃，老师说愿意等我再考虑一下（感谢老师！）</li><li>后续：告知老师确认放弃，得到老师的祝福（老师人真的好好）</li></ul><p>入营情况：</p><ul><li>（官方说法）：6月28日至30日，我院第十三届全国优秀大学生暑期学校在嘉定校区圆满举行。本次暑期学校共有230所高校的3166名学生报名，经过专家组筛选，451名学子从全国75所国内重点高校中脱颖而出，包括哈尔滨工业大学、西安交通大学、西北工业大学、厦门大学、中南大学、四川大学、南开大学、山东大学、东北大学、东南大学、北京理工大学、华南理工大学等知名高校。</li><li>入营的bar比较高，感觉末九只放各专业rk1进（不限定计科），本专业rk3未入营，本校只放计科、信安、软件rk1共3人入营。入营还搞了一个很长的候补队列。</li><li>入营即offer，只是把入营者进行了一个排序。计算机科学与技术入营92学硕30专硕，全部给了优营。</li></ul><p>考核：</p><p>机试40分+笔试60分+面试150分+专业英语50分+面试英语50分</p><p>机试（40分，1.5小时）纯送分题</p><ul><li>10分，给字符串，要求按照规定格式输出，for循环即可解决。</li><li>15分，数独寻找冲突，分别找出行列宫的第一个冲突的地址，for循环即可解决。</li><li>15分，打印数字三角形，若打表机试部分0分处理，必须使用递归完成。递归即可。</li></ul><p>笔试（60分专业课+50分专业英语，总共1.5小时，完全来不及）：</p><p>专业课（完整考察408，均有考到，《王道》难度，不少原题）20选择10填空10判断4大题，大题5分一题其余1分一题。</p><ul><li>数据结构大题考察求从树根到某点S的路径，典型的数据结构考研题。</li><li>OS大题考察写PV，经典的爸爸妈妈儿子女儿句子苹果问题。但是我好像写的不太对。</li><li>计组大题考察微指令，全空着了。</li><li>计网大题给一个MAC数据报，要求还原MAC源地址，IP地址，TCP的具体状态码（ACK&#x2F;FIN&#x2F;SYN这些，多选），最可能是哪种IP协议（ICMP&#x2F;DHCP等），抽象，考研题都会给格式结构的，这直接要求默出来。这道题也是空着了。</li></ul><p>专业英语（新闻报道类文章20分+论文原文30分，分别是4道题目和3道题目）</p><ul><li>新闻报道类大概是讲了一个科学家很喜欢看论文，最后一年看了八百多篇论文，问她怎么开始喜欢看论文的，等等细节问题，感觉像高中的细节搜索题，最后有个开放问题问读论文有什么好处。</li><li>论文是关于大模型幻觉的。直接问论文的motivation，作者的方法，以及为什么这个方法能excel。感觉就是最基本的阅读英文论文的报告。</li><li>主要时间太紧了，根本没来得及看全原文，只能瞎写一些上交了，但看到同学基本都写满了，还分点写的，心里很不是滋味，当天晚上心里很难受。</li></ul><p>面试（150分专业综合+50分英文面试，不同组考核的差别较大）</p><ul><li>please introduce yourself in two minutes.</li><li>你如何看待人与人之间的“边界感”，如果你在组会上发现更好的方法，是否要当场给同学指出来（这位同学不太希望被当场指出）。</li><li>讲讲项目，深入探讨，感觉可能有点问穿了。包括项目细节（细节确实可以看出来有没有认真参与）。事后查阅了电院官网，发现这位老师（还是面试组长）就是做时序预测方面的，属于是小方向上的同行，运气真好，这都能遇上。不过可能老师照顾我，属于是没有继续问，给我留了点面子。</li><li>CSDN博主，是做综述性的工作，还是创新性的工作（回答是综述性的工作，主要在做总结与分享）</li><li>这时候基本在消磨时间了：优秀学生干部，都干了啥（感觉我说太多了，组长老师有点愣，下次说一项就可以了）</li><li>联系老师了没有？回答联系了某老师，对某实验室比较感兴趣。（后来才知道该老师的助理教授就在下面坐着）</li><li>问这个方向跟我本科经历不太契合？回答泛深度学习方向都可以研究，可以往导师的方向上靠，和研究导师指定的方向，我说我的兴趣主要集中在深度学习的大模型方向和计算机视觉方向，这两个我都可以做。</li></ul><p>流水日记：</p><ul><li>6.28 从杭州出发，晚上到达上海，转地铁转了好久才到嘉定，有学长在酒店大堂等待我们并给我们发参营用品。有一件衣服（很大气，用料很好，可以经常穿），一本笔记本，一个很好看的同济大学的帆布袋，一支笔还有一沓餐券（狠狠夸奖同济的餐食，中餐晚餐餐券25元，早餐餐券8元，真的好吃的不得了）。同济的酒店定在格林豪泰，两人一间，我跟同校信安的同学一起住。晚上下雨，前往同济校园稍微转了转，但是吃饭的时候食堂已经关了，遂随便解决了一下。同济的校园很大，有一个护城河一样的河流。有很多高楼，有一个很大的操场，很有校园氛围。</li><li>6.29 早上开营仪式+参观实验室。开营仪式水过去了，实验室只参观了两个感兴趣的。看了一个在地下室的偏雷达探测的实验室，然后看了一个类脑研究的实验室。下午机试+笔试。机试难度太低了，基本上直接AC了，我对于数独那道题理解一开始有点偏差，多花了点时间，考场很多人就直接离开了。笔试难度尚可，但是时间太少了。我先做的英语第一篇，再做专业课，最后补做英语第二篇。英语第二篇没有完卷。然后整个晚上都处于一种抑郁的状态。考完后跟同学一起逛了校园，今天晴天，夏日的微风轻拂过，再加上黄昏的夕阳，同济的校园显得很美。但我当时感觉这个笔试的发挥不一定能来了，所以心里无限感伤。当时心里挺难受的，渴望，但又感觉大势已去，有种说不出来的感觉。</li><li>6.30 早上面试，我在比较靠前的位置，本来以为能在中午吃饭之前面试的，结果了正好到我的时候老师就去吃饭了。这意味着我是下午第一个接受面试的，一想到老师酒足饭饱之后精神焕发来拷打我，就不寒而栗。我没吃中饭，因为吃饱饭之后人容易发昏。多出来的这半个小时左右的时间我跑到了四楼去自己跟自己说话，从头演练了一遍可能被问到的问题然后自己回答，包括英语问题都演练了一遍。然后面试总体比较顺利，面试完后回到食堂好好地吃了一顿。离开的时间同济又是大雨，我匆匆忙忙地坐着嘉松线离开了嘉定。感觉对于同济，真是非常的喜欢。</li><li>7.5 早上在人大信院报道时看到，优营中间。</li><li>7.6 晚上手动排序了一下，共92个优营，排位40+，中偏前。总共112人，发了92个优营，真的是80%优营率。</li><li>7.4 老师联系我，问是否确定之后来，我说想试试上交，老师表示理解。</li><li>感觉同济是最值得投递的学校，对于rk1非常友好，是一个很稳很稳的保底选择，有了同济的优营之后，我在参加其他学校的夏令营的时候心态上都比较稳，有助于更好的发挥。</li></ul><h3 id="7-3-成电计院"><a href="#7-3-成电计院" class="headerlink" title="7.3 成电计院"></a>7.3 成电计院</h3><p>时间线：</p><ul><li>7.3 报到</li><li>7.4 面试</li><li>7.5 结果：在人大信院考完机考之后考笔试之前看到，优营。晚上数了一下40+&#x2F;100的位置。</li></ul><p>抽象，只有7.4的一场面试，有主持人，主持人会引导面试过程进行。</p><p>面试：</p><ul><li>（1）三分钟自我介绍，可以中文或者英语（据说用英语会更有好处，故我选择用英语进行介绍）</li><li>（2）英语问答：</li><li><ul><li>why do you choose 成电 university？</li><li>how many dream schools do you have？（前面我自我介绍里提到成电has always been my dream school，老师跟这个杠上了，之后的英语问题都围绕这个展开）</li><li>do you apply 华五 or 北京的学校？</li><li>what’s your advantage?</li></ul></li><li>（3）专业问题：运气比较好，抽到了简单的算法题，刚好会回答。 （算法）数轴上有n个区间（li, ri），选择尽量多的区间，使得这些区间两两不相交。</li><li>（4）简历问题：</li><li><ul><li>主要拷打了我其中的一个项目，附加拷打了另一个项目</li><li>CSDN博主：你做了几年了？你如何回复他人的提问。</li></ul></li><li>时间还有一分钟结束，主持人说如果我没有补充，就可以出去了。</li></ul><h3 id="7-5-人大信院"><a href="#7-5-人大信院" class="headerlink" title="7.5 人大信院"></a>7.5 人大信院</h3><p>时间线：</p><ul><li>7.5 报到，机考</li><li>7.6 面试</li><li>7.7 坐动车离开北京</li></ul><p>优营效力：入营130，到场86，优营71，只排序不定性（即不发优营&#x2F;offer&#x2F;候补等）</p><p>7.4晚上21：30从成都双流飞北京大兴，睡下已经1:00了。7.5早上7点起床，换乘3趟地铁到海淀黄庄下，到人大信院报道。7.5中午开营然后下午马上机试笔试，7.6早上面试，先集体群面，全部群面完之后再单面。</p><p>考核要求：数据结构与算法（80分）+程序设计机考（20分，支持C&#x2F;C++&#x2F;Python【python只支持最基本库】）专业课及综合素质面试（150分）英语口试（50分）</p><p>【我好像签了保密协议，不能透露太多】</p><p>【占比20分】机考（1小时3道题，时间很赶）：</p><ul><li>（1）类似收集雨滴问题：几个挡板中拿出两个来，能聚集最多的水。暴力80分。【这道题是LeetCode上经典的问题，但当时我没练，所以只会暴力骗分】</li><li>（2）大模拟：实现高考的赋分制，还要查询。主要逻辑都写出来了，拿了50分，没有敲一分一段对应的，时间来不及了。</li><li>（3）称重问题，n个砝码，每种分别重x[i]，每种有y[i]个，问有多少种可能的情况。暴力30分。</li></ul><p>【占比80分】笔试（1.5小时，时间太宽裕）：</p><p>【考察了基础408问题，很简单，稍微过一遍408的数据结构就能全部答上来。】</p><p>面试：</p><p>群面：</p><ul><li>（1）怎么看待gpt对于研究生阶段学习的意义？（好处、坏处）</li><li>（2）如果研究生阶段你研究的课题真的无法开展，真不会，该怎么办？</li><li>（3）遗漏</li><li>（4）数据隐私与数据需求的矛盾，怎么去平衡？（即现在企业中需要用户的数据去训练模型，但是用户的数据隐私性很重要，你怎么看待这个问题）</li><li>每个问题最多3人回答，共9人，第一轮必须每人回答一次。总共15分钟，时间够到问了4个问题，我只回答了第二个问题，但是我是第一个回答的，后面两个人基本是在重复我的论点。</li></ul><p>单面：</p><p>（只有10分钟，感觉时间确实太短了。本来是两天面试，但是全部压缩到一天，导致本来能面15分钟现在只能面试10分钟）</p><p>上来直接抽信封，我选的9号。可能之前成电抽题运气太好了，这次题目都不太会回答。</p><p>【占比50分】英语：</p><ul><li>（1）对于Sora、GPT等大模型，你怎么看待？（这个感觉跟群面时候的题目是一样的）我回答的可以便利研究工作，让我们聚焦精力在有必要的研究上。（感觉回答不够丰富）</li><li>（2）专业问题：system software 和 application software的区别？（刚听到有点懵逼）应该问的是系统软件和用户软件有什么区别。我回答system software runs in system level, which connects hardware and application software 并且处理I&#x2F;O operations 等。然后 application software runs above system software, which connects system software and user 并且把user的意图传递给system。（感觉我基本能讲清楚，就是英文表达不太顺畅）</li><li>感觉英文问题总体回答还算正常，但是比较磕磕绊绊，显得不太熟练，与四六级双600有很强的对比。</li></ul><p>【占比150分】专业</p><ul><li>专业真的一团糟</li><li>（）解释数据结构中的堆结构？然后问堆的应用？我说堆是用二叉树实现的，然后有小根堆和大根堆。但是我不知道为什么脑子一抽，提了一句红黑树，后来又给自己否定了。说堆可以运用在希望获得从小到大序列或从大到小序列的场景。（后来查到优先级队列、topk问题、排序等都是应用场景，当时都没答上来）</li><li>（）解释前缀编码和哈夫曼树？我说我不知道前缀编码（后来知道是哈夫曼树是前缀编码的具体实现）。然后哈夫曼树我解释了，是根据词频，词频较大的优先编码。</li><li>（）解释单源最短路径dijkstra算法？dijkstra算法是否能运用在外卖领域？这里我的回答是很大的败笔。我先在解释dijkstra算法，但是解释了一会儿，后面的老师说这道题的问题在能否运用到外卖领域。我脑子抽了，我直接回了一句，“不是要先解释dijkstra算法嘛”，因为根据我的理解，我确实听到了老师的问题是先解释dijkstra算法再问能否运用到外卖领域。然后老师让我继续，这老师应该是提醒我重点不要偏了，给我机会我没把握住。后面我快速解释了dijkstra，然后说可以运用到外卖领域上。然后我脑子又抽了一下，说但是我认为可以用A*算法去优化这个。</li><li>然后另一个老师就问我，你认为为什么<code>A*</code>算法可以比单源最短路径有更好的效果。我说如果引导函数提供得当的话，<code>A*</code>算法会更具有优势。老师继续深入问我具体在哪方面呢，因为算法对比肯定要有一个统一的标准，不能用额外的东西来提供优势。我没有给出进一步回答，只是重复了引导函数的优势。老师继续问我从时间复杂度上或者空间复杂度上怎么体现出优化，<code>A*</code>算法能达到多少，dijkstra算法是多少。我回答dijkstra算法如果不经过堆优化的话，是<code>(|V|+|E|)log|V|</code>，<code>A*</code>算法我不太清楚。但是我认为单源最短路径只是针对静态的，而A*算法可以随时根据目标进行调整，毕竟外卖是一个动态的过程。此时老师还想继续问，但是时间到了，老师马上停止提问了。</li><li>我感觉专业课一团糟，我表现的像一个没有深入思考的人。而且这些问题都是较简单的问题，我答成这个样子，真的很说不过去。还有脑子抽了，太急了。后来跟其他人交流了解到如果不会，其实可以直接跟老师说不会，这样就可以听到后面的问题，有更多的机会展示自己。然后其他人都问到简历了，我的专业课时间太久了，所以简历都没有面到，真的很烦，感觉很好的一次机会就因为我的不理智浪费掉了。</li></ul><h3 id="7-10-上交电院计系"><a href="#7-10-上交电院计系" class="headerlink" title="7.10 上交电院计系"></a>7.10 上交电院计系</h3><p>时间线：</p><ul><li>7.9 动车前往上海</li><li>7.10 机考</li><li>7.11 面试</li><li>9.10 放弃直硕优秀生源</li></ul><p>第一天机考，第二天面试</p><p>总体评价：好不容易有几个赏识我的老师，却配上一个差地不能再差的机考成绩。</p><p>机考：</p><p>面试：</p><p>给老师提交了材料之后，老师说，你做个自我介绍吧。 自我介绍 具体问了项目，具体是什么。我做了什么工作。我们团队有几个人，我承担了什么工作。</p><p>没有问另一个项目。</p><p>英文问题：问了一个transformer有关的问题，和一个基础的日常问题。</p><p>英文问题结束之后继续拷打transformer与大模型相关的问题（我的简历上有写到）</p><p>BERT模型相比于transformer模型有什么不同之处？BERT模型的预训练任务（两个，准备过） 自注意力机制的“自”体现在哪里？我说QKV矩阵。老师问我QKV矩阵是什么，我说从序列中和权重相乘得到。老师又问这个权重，我说是可训练的。</p><p>最后老师说看我当过CSDN技术博主，问我windows（后来又说问c++的vector）中线性表是用顺序表还是链表实现（这有什么关联），我犹豫了一会儿，说用顺序表实现。老师又问如果让你回到计算机刚开始时，你会用顺序表还是链表实现，我犹豫了一会儿，说用链表吧。我到最后都不知道这是在问什么。</p><p>面试结束之后有不止一个导师加我微信，询问我是否有意愿了解他们的方向。从老师反馈来看我的面试应该是非常好的。</p><h3 id="7-12-中山计院"><a href="#7-12-中山计院" class="headerlink" title="7.12 中山计院"></a>7.12 中山计院</h3><p>时间线：</p><ul><li>7.11 飞机前往广州</li><li>7.12 上午模拟机考，下午机考</li><li>7.13 早上开营仪式，下午参观导师实验室+参观超算中心</li><li>7.14 面试</li><li>7.16 中午出优营结果</li><li>7.17 离开广州</li><li>9.26 向limei确认放弃</li></ul><p>7.12 上午机考模拟，下午机考</p><p>机考内容有 程序设计+数据结构+模拟+算法</p><p>我机考大概是576。共10道题，满分1000分，我做出来4道题（链表实现、并查集、类继承、模拟）。记忆化递归51分，这个是因为超时了。有一个逆序对的25分。然后骗分30+30+30+20（长度太长，截断了，没法打表）。</p><p>机考过编译10分，过标准样例20分，随机测评70分。而且标准样例和随机样例的预期结果和实际结果都是可以看的（因为长度原因超过而被截断的看不了），所以可以骗部分分。</p><p>绿群群友贡献的题目详情：</p><ul><li>前三题考c++多态，继承，深拷贝</li><li>第四题：简单的记忆化搜索，楼层高H，给定D天，住户1在一楼，住户2在H楼，求D天后用户1到达h1，用户2到达h2的所有可能方案</li><li>第五题：简单dfs或者并查集，给定无向图，判断其中两点是否连通</li><li>第六题：给定两个字符串A和B，是否存在唯一映射使得A能变成B，简单双哈希表秒了</li><li>第七题：最小交换次数，给定只含有[]两种字符的字符串，求出最小交换次数使得一个[总与]匹配，最初以为是dp，其实简单贪心就行了，计算不匹配的]括号数量，因为每次变换至多让两对括号重新匹配，那就用括号数除2向上取整就行了</li><li>第八题：简单模拟，图中有蜡烛，障碍，空点，蜡烛只能照亮所在行和列的空点，蜡烛的光可以被障碍遮挡，求未被照亮的空点数量</li><li>第九题：城市编号1-n，每个城市有一个美丽值（int），他们之间有一些双向道路连接（可达），人从城市1出发，总的美丽值等于他经过的城市的美丽值的异或，求他能获得的最大美丽值</li><li>第十题：给定序列A,B,S，和一些可用的变换，求怎么变换AB使得A是S的子序列，而B不是S的子序列</li></ul><p>总结：</p><p>（1）程序设计考了面向对象的深拷贝、类继承</p><p>考查形式大概是工程文件，然后给你看一部分的实现或者都不给你看，让你实现构造函数、析构函数、拷贝构造函数等，或者是把类写出来。我拿了类继承的分，</p><p>（2）数据结构考了链表的实现、并查集</p><p>链表的实现：给这个链表的头指针和一个值num，保证首节点没有删除操作，要求实现一个函数，删除该序列中所有val比该值num大的节点。</p><p>并查集：给出节点的连通性，求问s节点和d节点是否联通。深搜50分，改用简单并查集（未用路径压缩）即可100分。</p><p>（3）模拟比较简单</p><p>给一个字符矩阵，O表示蜡烛，点表示空地，#表示墙，烛光不能穿墙。问烛光扩散后，有几个位置还是空格。</p><p>（4）算法考了记忆化递归、序列什么的</p><p>记忆化递归：一栋楼有两个住户，每天住户可以往上搬一层，或者不动，或者往下搬一层。第0天时两位住户分别住在第1层和第h层，问使得第d天时两位住户分别住在第h1层和第h2层的方案数有多少个。</p><p>序列：一组中括号序列，且左中括号和右中括号的数量相等，均为总数的一半，可以交换任意两个序号对应的括号，问能使得序列的括号合法的最少交换次数。</p><p>7.13 早上开营仪式，下午参观导师实验室+参观超算中心，和两个稳中山的同学共6人一起吃了个晚饭，拍了合照。</p><p>下午进老师实验室，有很好的学长跟我们聊天，讲了在中山生活的感悟，然后老师来跟我们交流，讲了实验室的配置（应该是不缺卡），毕业的条件，放实习的条件等。然后谈了谈他做的方向（应该是有4个方向，基本都是关于CV方向的，里面的小方向，我都挺感兴趣的）。然后老师说，如果真想来sysu，基本都能录上。然后有同学让老师认认我们的脸，多打几分，哈哈。老师说明天他不参与面试。</p><p>7.14 面试：我是计X组，第一天早上第X位参与面试。</p><p>严格计时，满12分钟就结束。有的组会对各部分计时。</p><p>坐在门口等候，前一位出来就进门。两张桌子拼在一起，面试老师坐在对面，也有一个坐在你这边，你前面有个电脑，你的PPT已经被预先放在那里了，你可以用鼠标点击打开PPT与前后切换。总体氛围很宽松，像小组讨论一样。我们组的情况是只有主面老师在提问，其它老师在摆烂或发呆。</p><p>流程是先从信封中抽取英文材料。英文材料大概六七行的样子，科普类短篇或者是新闻报道，专业性不是很强，但可能会有几个专业名词比较陌生。要求先阅读一遍，再翻译。听说有的组会打断，不知道是因为时间到了还是英语实在太broken了。我抽到的是一段关于百度的阿波罗无人车或者是无人出租车，没太搞懂。有简单介绍，然后是人们关于它的顾虑，像一篇科普类新闻。我没有被打断，个别词没读太顺，但英语底子还好，总体比较顺畅。翻译自我感觉也是还可以。也有人抽到5G等，评价是难度不一。</p><p>然后是讲PPT，我就直接大大咧咧地从前往后讲。一开始我以为计时器是对我PPT进行计时的，所以讲PPT就快了一点。我PPT主要介绍了一个项目，其余都是略讲。然后跟老师说如果感兴趣的话之后再提问我（后来想想胆子真是大，有种倒反天罡的美感）。没被打断，直接讲完了。</p><p>讲完PPT之后，主面老师开始问我问题。出乎意料的是，老师没有问项目，似乎对我当助教的经历比较感兴趣。问我助教都干些什么，我说验收实验、讲解试卷、日常答疑等。然后老师又问我们计算机系统课程是不是比较偏软件的？我说是的，我们比较偏硬件的课程主要在计算机体系结构里完成。老师问我都做过哪些？我说我们每个人都要完成一个五级流水线。这个时候老师突然欣慰，脸上笑容更加洋溢了，我心里就感觉不好，果不其然，老师开始很欣慰地拷打专业课了，在这等着我呢。老师问流水线是哪五级？我说IF、ID、MEM、EXE、WB。老师接着问，有哪些因素影响流水线继续推进？我当时没反应过来，就答的预测失败，会使得流水线需要停滞甚至回退。然后老师试图引导我回答更多的原因。我突然想起来那三个因素：结构冲突，数据冲突和控制冲突。然后老师问我控制冲突跟我之前回答的那个是什么关系。我回答应该是包含关系。老师突然笑了，说应该就是一样的。我也笑了，说有点考虑不全面。</p><p>老师继续问我之前的项目，我就把PPT调回去讲了一下那个项目。然后老师比较关心的是我有没有对算法做一些改进。我有点懵了，就说可能在处理数据的代码上有一些改进。这里表现的不太好。老师问是不是把模型缩小了，我说没有缩小模型。</p><p>然后闹钟响了，应该是时间到了，老师就让我出去了。我说谢谢老师，跟你们交流很愉快（这句也有点不知好歹了，有倒反天罡的美感）。然后我就滚出去了。</p><p>滚出去之后，找还没面试的同学交流了一下面试的形势，同时给他们一些信心。我是我们学校10个人中第一个面试的，也是最后分数最高的。中山的面试我感觉酣畅淋漓，可能是之前面试到现在否极泰来了。感觉老师们都挺好的，交流确实很舒服。可能是运气比较好，老师没拷打我数学。听说我们学校别的同学有被拷打线性代数、概率论等。我面试完之后一个最大的遗憾就是没有将本校更进一步向SYSU的老师们展示，感觉我还是做不到游刃有余地切换，还是有一些胆小哈哈。</p><p>不过此时我已经有同济的优营了，来中山其实就是来玩玩，主要跟同学们聚一聚，感觉在一个陌生的地方跟同学们一起玩还是挺有趣的。</p><p>中山我感觉还是有点背景面的意思，我们学校rk靠前的同学得分就是会偏高，甚至4个优营3个都是rk1。提前联系导师对于面试分数没有太大的优势。</p><p>7.15 中午和来参营的共10人拍了合照，下午离开参观了沙面，晚上参观永庆坊。</p><p>7.16 下午参观广东省博物馆，远看广州塔，在广州图书馆休息。晚上补了早茶，和舍友吃了16份广式甜点，很满足。</p><p>7.17 飞机离开广州，飞杭州萧山。广州地铁真的是地狱。我在车陂南站等了大约5趟地铁，全是人，根本上不去。后来来了一辆完全空的地铁，直接人全部挤上去就充满了，后面还有人没上来，早高峰的广州地铁真是太恐怖了。</p><p>优营情况：效率很高，7.16中午出优营结果。</p><p>总结感悟：</p><p>前一天的机试没有太看，老师没有提起来，据说考太低可能会被问。感觉面试还是有点看背景，三位rk1的排位都很靠前，如果没有rk可能得项目非常好才能弥补。中山还是比较整体地去评判一个人的。提前联系导师似乎对于面试结果没有影响，不会因为老师关照就多打分。</p><h3 id="8-26-国防科大计院"><a href="#8-26-国防科大计院" class="headerlink" title="8.26 国防科大计院"></a>8.26 国防科大计院</h3><p>时间线：</p><ul><li>8.26 晚上坐地铁到世界之窗旁边报到</li><li>8.27 清早合影，然后一天的学术讲座</li><li>8.28 早上体检，下午参观</li><li>8.29 早上面试，下午心理测试</li><li>8.30 离开，坐地铁回</li><li>9.4 出结果</li></ul><p>面试：</p><p>【这个我好像也签过保密协议，所以有些不能细说】</p><p>面试分为综合面试和政治考核。</p><ul><li>英文自我介绍：抽英文问题，5选1。老师读的不是很清楚，好像是问将来一段时间你觉得哪个计算机领域会发展比较好，好像是这样。我说多模态和大语言模型会比较好，因为数据很多，要用这些数据来做预测或任务。</li><li>中文自我介绍：</li><li>项目问题：<ul><li>有没有去申请专利或者有论文的产出。</li><li>在预训练过程中如何解决灾难性遗忘问题。（没答上来，老师换问在预训练阶段你做了什么，我说使用全参微调）</li></ul></li><li>其他还面试了哪些学校，如何做选择？那你有没有联系的导师？其他学校有没有联系的导师？（感觉很在意我是不是鸽子）</li><li>老师没有我们的个人信息，没有简历（不知道能不能自己准备简历递上去，我没带简历），所以所有都只能依靠自己说出来，对于工作的表述是一个很严峻的挑战。提问很随性，很符合我对于推免面试的想象。</li></ul><p>政治考核：</p><ul><li>与党有关的知识（不便细说）</li><li>一分钟介绍家庭情况。</li><li>有什么特长，不能是爱好。</li></ul><p>评价：</p><p>全程包吃包住，但是体检要自己花钱，报销路费（这个没用上）。主要还是锻炼了自己，用来刷经验的。从一开始就没打算来。但是确实发现了自己项目中的不足部分，后来回去重新复习了一下。</p><p>最终位次：排名170&#x2F;467（夏令营1+夏令营2）</p><h3 id="夏令营总结与回顾"><a href="#夏令营总结与回顾" class="headerlink" title="夏令营总结与回顾"></a>夏令营总结与回顾</h3><ul><li>不够自信，清计院没有去尝试。</li><li>非核心rk1夏令营还是比较受限的，复旦（核心rk1入营）、sjtu-ai（核心rk1入营，我以为bar很高，真的bar很高）。</li><li>信息差：ustc-6系没入：计科投递ustc-6系属于跨专业，这个关键信息没有把握住。</li><li>408：没有复习好，南大计院机试直接寄，同济也受到了影响。</li><li>机试：没有复习好，上交的机试得分太低，但凡第二题能Ac出来，结果会很大不同。</li></ul><h2 id="预推免"><a href="#预推免" class="headerlink" title="预推免"></a>预推免</h2><p>预期目标：计划报复旦计院、浙大工院、南大计院、尝试tpu，尽量捞一个学硕或者专硕的稳offer，目标为华五的硕offer。</p><h3 id="9-13-南大计院"><a href="#9-13-南大计院" class="headerlink" title="9.13 南大计院"></a>9.13 南大计院</h3><p>预推免的难度明显比夏令营难度下调了，很多都是基础的408知识。</p><p>时间线：</p><ul><li>9.8 线上机考</li><li>9.9 出了机考结果，获得了线下资格。</li><li>9.12 下午坐动车出发前往南京南，晚上住在南大仙林南门不远处。</li><li>9.13 上午面试，下午2点到4点机考。9.13晚就睡了4个小时。</li><li>9.14 早上7：30高铁回长沙。约11点高铁上收到邮件，候补。打电话问，在预推免waitlist前20，午后打电话确认在前15。老师说有机会能补上。预计25日将夏令营和预推免waitlist合并，按权重考虑，算法没说。据说也有机考280的wl，也有280的学硕，也有210的专硕。</li><li>同学wl前10在9.26下午候补到专硕</li><li>我wl10-15在9.27早上候补到专硕</li><li>929当天南大cs几乎被鸽穿，据说wl120-130都能补到专硕，离谱啊离谱，南大你养了一大群鸽子。</li></ul><p>线下情况</p><p>直硕7组，直博1组。每组大约15人，有人没来，大约硕士可能不到100人这个样子。看了一眼本组的生源，有几个南大的，也有一些211的，包括苏州大学的等，排名也有差异，不都是第一这种，也有很多前十的。总体来说感觉还是放松了很多。</p><p>面试</p><p>小会议室，3个老师，全程录音录像。中间的老师比较年轻，两边的老师有点老。双盲，老师不知道我的名字和任何信息，只知道我的编号。</p><p>（非典型）</p><p>【南大一般纯靠打专业课，但是到我这里，由于我自己的引导，老师开始对我的项目感兴趣，然后全程在听我的项目，难绷】</p><ul><li>中文：介绍自己近期遇到比较难的问题以及如何解决的？我就顺势把我的第一个项目介绍进去了。然后老师听的也挺感兴趣，就接着问下去了。</li><li>老师问这个项目是在高校做的还是在企业做的。其实应该回答这是校企合作的项目，但是我说在本校实验室里做的，就是高校做的。</li><li>中文：还有做过其他项目吗：我自己主动说了很长时间，然后老师对我的项目中部分感兴趣的地方深入问。</li><li>xxx，在你项目中有什么作用？</li><li>为什么用Qwen不用Llama（旁边的老师替我回答了说是中文语料）</li><li>我说如何获取数据，分析数据，以及呈现数据是比较重要的。老师问获取数据比较感兴趣。我说利用开源数据集，因为企业很多数据集都是封闭的，不免费公开。所以怎么从开源数据集中拿到自己想要的东西很重要。</li><li>你之后打算做什么？我回答NLP，之前联系了某老师的组。老师说这和我之前的项目没什么关联？中文和英文的tokenizer的区别是现在业内研究比较重要的问题。我说这个在本科阶段没有太多的了解。我说对齐也是比较重要的问题。</li><li>英文：介绍quick_sort以及它的时间复杂度。</li></ul><p>另外：有同学问到TCP、最小生成树、遍历数组时按行优先遍历更好还是按列优先遍历更好（空间局部性）、一阶谓词逻辑的英文介绍、SQL的英文介绍等。感觉随机性很大，每个组的情况都不尽相同。</p><p>我是属于一开始老师问的第一个问题时，我就把话题转到了我的项目上，然后老师对我的项目也比较感兴趣，就顺着往下问了，所以全程没有拷打专业课。从这里可以看出来，有的时候还是要稍微机灵一点，把话题往自己的项目上去引导，往自己熟悉的地方去引导，会有更好的结果。全过程我应该还是比较自信的，但是缺点是说话的时候没看着老师的眼睛。</p><p>总体应该不是压力面，同学出来都感觉跟老师聊的挺不错的。希望我能有个比较好的结果。</p><p>机考</p><p>3道题，最终得分20+100+75&#x3D;195，英文题面</p><p>【我签了保密协议，这里的机考题不能透露出来，只能稍微描述】</p><p>第1题：多维矩阵乘法</p><ul><li>高维矩阵相乘</li><li>一上来就这道题，没有任何思路，看了15分钟之后跳过了，最后解决了一个数据点，拿了20分。</li></ul><p>第2题：base32编码（简单模拟题，大家基本都做出来了）</p><ul><li>百度上应该有这种编码技术，把句子里的英文字母按照ASCII码逐个转化为八位二进制数，然后连起来，若长度不为5的倍数就加0补齐。然后把这一长串按照5位一切分，再由二进制向字符哈希映射即可，最后如果结果不是8的倍数，就加&#x3D;补齐。</li><li>获取ASCII码：对于char c使用int(c)，这里有点考计算机基础知识了。</li><li>需要自己实现由string二进制数转为十进制数以及ASCII码的生成（十进制数转到string二进制数），应该有现成的库，但我没想到。</li></ul><p>第3题：string golf（数据比较水，纯暴力有75分）</p><ul><li>给了很多定义：</li><li>【我就把这里略去了，不讲】</li><li>给定support集和reject集，问同时满足的长度最长的字符串是什么，保证答案唯一，即不会出现长度相同但多个满足题意的情况。</li><li>数据规模：每个set里个数＜20，每个字符串长度＜200，（很友好的数据，故一上来就想到用暴力求解）</li><li>数据子任务：30%数据保证没有通配符.和+（实际上我完全没做这里的处理也过了75%）</li></ul><p>评价：英文题面虽然没有带来太多的理解难度，但是一上来看到的时候心理压力还是非常大。第一道题15分钟没有任何思路真的很难受。但是发现第二道题很简单之后迅速花了大概40分钟敲出来（最近代码生疏了，边做边输出结果验证各个步骤，所以慢了），但是compile error了一次，改了一下交了就拿到了第一个100分，心情大定。然后做第3题，本来打算敲个暴力拿到30分，但是花了30分钟敲出来之后，意料之外骗到了75分，心情又好起来了。最后大概剩下半个小时，第一题想拿点突破但是没有结果，最后我想到可以用dfs来模拟每个维度的不同数值做累加，但是时间已经来不及了，最终没有做出结果来。所以感觉还是有很多的遗憾，因为我知道这次简单，大家应该都能做的比较好，所以我不一定具备优势了。</p><h3 id="9-17-清华软院"><a href="#9-17-清华软院" class="headerlink" title="9.17 清华软院"></a>9.17 清华软院</h3><p>时间线：</p><ul><li>9.5 收到通知，获得线下综合考核资格并告知了考核时间与方法</li><li>9.12 收到通知，未能通过清深初筛</li><li>9.16 坐飞机从长沙出发，前往北京</li><li>9.17 早上资格审查，下午2点到6点机考</li><li>9.18 早上面试，晚上坐过夜火车离开北京</li><li>9.18 晚上约8点，在地铁上收到了拟录取</li></ul><p>资格审查：</p><ul><li>需要进行人脸比对，要求跟上传的证件照相似度达到80%。建议一定拍个像一点的。到我的时候由于我证件照是大一时候的照片，这几年已经有点不像了。老师非常好心地帮我验证了好多次，每次都差一点，在78%左右。我不断地把自己往照片上拟合，挤出笑脸hhh。万幸最终验证通过了，如果验证不通过可能要写保证书。</li></ul><p>机试：</p><p>【我忘记自己有没有签保密协议了，题目就先不公开了】</p><p>早上有2小时的模拟机考，可以自己试试机房的环境，以及摸索系统。</p><p>OJ赛制，提交及时反馈，每题最多32次提交，取最高分。开卷，允许携带纸质资料。</p><p>环境：NOI虚拟机，网页OJ，本地有Vscode，无dev等集成环境。需要手动使用命令行g++编译并运行。</p><ul><li>第一题：阿瓦隆。题目难度约为CSP第1题至第2题难度。我考试开始后13分钟提交并拿满。</li><li>第二题：网络。我的解题思路：数据分层比较明显，只使用并查集优化的kruskal算法可以拿到33+19&#x3D;52分。是没办法过②④两点的。盲猜数据点连接之后应该全为联通图，所以②点直接输出ans&#x3D;n+m-1，就拿到了这27分，这个比较难想到，数据点也恰好很看运气。最后21分没有去尝试，直接放弃。此时考试过去一个半小时，已经拿到179分。</li><li>第三题：边双。我的解题思路：写了一个dfs的模拟，并把限制条件全部模拟出来，但是没法解决自环问题（成环之后会反复走这个环，没法出来，造成递归无法结束），最终这道题没有做出来，也没有拿全任何一个数据点的分数，使用有深度的递归（即到某个深度强制结束递归）的方法骗到5分，通过微调这个深度骗到10分，再改进无进展。时间耗尽，结束。后来在绿群听说直接输出所有权值加和（即默认所有节点都可访问一遍）可以得10分，不知道跟我这里的这10分是不是一样的，没再深究。第一个数据点有20分（规定n&lt;&#x3D;20）。</li></ul><p>评价：我的最终成绩为接近200分。结束之后绿群里看到大部分人为100+（33+19）&#x3D;152分，即第一题和第二题只使用并查集的kruskal算法。少部分人从第三题拿到了10分或20分。所以我估计中位水平在170分左右。同时这次有许多满分300分，我了解的就至少有4个以上。最后出结果的时候看到很多152分的就没有录取。</p><p>面试：</p><p>共4组，76个同学。基本上会把一个学校的同学拆到不同组去。每组连续面5个同学，老师休息一次。每个同学20分钟，全程严格计时，各部分也是严格计时。</p><p>先对着PPT讲自我介绍（5-7分钟）：会严格卡时间，这里一定要控制好时间。我在项目上花费了太多的时间，所以最后没讲完，老师让我快点往后过一遍。这个整体表现真的很不好，千万要注意。</p><p>然后老师对PPT里感兴趣的内容提问，问题很广泛，基本上像聊天面，聊到哪里就问什么，无迹可寻。</p><p>固定的几个问题：</p><ul><li>英文问题：感觉像是负责该问题的老师随机结合你的项目提问。</li><li>政治问题：你是党员吗？我回答我是预备党员。提问这个的老师被其他老师打断了，就没再继续问了。我还听见其他有问近期的时事的，时政的。感觉这个也是很随机。</li><li>专业课问题：看老师喜欢哪个学科，逮着猛猛薅。我这个老师很喜欢编译原理，于是问我编译原理。第一个问题我大概能理解，第二个问题我没有太理解，我就说我不太会。其他考场有被问到数据库的问题，一个考场估计就问一个科目。（大家答的都不太好，专业课确实太难绷了，很难复习）</li></ul><p>压力的部分：</p><ul><li>你这个项目有什么实际意义呢（我以为是项目太水了被穿了，后来发现几乎每个同学都被问到了）</li><li>请你用一句话表明你的项目怎么体现出你的科研能力（这句也是每个同学都被问到了）</li></ul><p>我这个场地的老师有点压力面，但是其他考场的老师据说很聊天面。</p><h3 id="9-21-浙大工院"><a href="#9-21-浙大工院" class="headerlink" title="9.21 浙大工院"></a>9.21 浙大工院</h3><p>时间线：</p><ul><li>9.16 正常入营公布，未能入营，打电话问教务，被告知未入营</li><li>9.18 清软面试结束后，中午吃饭时，被电话告知候补入营</li><li>9.20 从长沙出发返回杭州</li><li>9.21 早上前往拱墅面试，下午陪同学逛西湖</li><li>9.23 晚上钉钉拉一个拟录取群，告知处于wl-9（共录取30人）</li><li>9.27 晚 wl-6，前面3人放弃</li><li>9.28 没有填报，相当于放弃了录取资格</li><li>9.29 晚上回去翻了钉钉群，至少鸽了15个，我应该能补到的。算了，有清软了，就不去浙大了。</li></ul><p>面试：</p><p>英语自我介绍，然后讲自己的PPT，之后考官提问，会抽一个专业问题。</p><p>主要是在对我着重提及的项目提问，我还是比较能应对自如的。</p><p>专业问题：抽到的是程序设计的，好像是继承的时候，如果父类函数加virtual但是子类函数不加virtual，能不能实现多态。当时脑抽，说不能实现。被老师质疑有没有学过程序设计。后来反应过来是能实现，有点尴尬。</p><p>政治问题 ：对待法轮功的态度，坚决反对。</p><p>下午陪同学逛了逛西湖。</p><h3 id="9-22-湖大信院"><a href="#9-22-湖大信院" class="headerlink" title="9.22 湖大信院"></a>9.22 湖大信院</h3><p>时间线：</p><ul><li>9.19 晚上邮件告知入营</li><li>9.21 晚上邮件告知面试分组</li><li>9.22 早上开始面试，排在第19位，下午1点面到。</li><li>9.26 下午出结果，有个稳保底了。</li></ul><p>面试：</p><p>不知道为什么今年面试在线上进行，很奇怪。但我也因此有机会参与。</p><p>先进候考室待着，到我面试的时候直接老师的摄像头就开了，一个房间大概五六个老师。</p><p>比较不好的体验主要有几点：（1）没有人提前告知你现在面试到第几个了，全程在等待，也不知道什么时候开始面试。（2）线上面试很难听清楚老师在说什么，那边感觉回音很重。</p><ul><li>先做自我英文介绍。</li><li>然后老师问我本科阶段有没有做过的科研和项目。我说我有PPT，老师说就简单回答一下就可以。我就简单回答了，然后稍微描述了一下细节。</li><li>老师对我做CSDN博主感兴趣，问我感兴趣的论文是什么。我说ICML的一篇论文，然后稍微讲了一下原理。</li><li>老师问我跟的哪个本校老师。</li><li>老师问我还有什么其他的offer，我说了拿到的几个。</li><li>老师最感兴趣的还是为什么我要来预推免，感觉是明牌鸽子。我老实说了想拿个本校的保障。</li><li>老师问我还有什么想问的，我说暂时没有了。</li></ul><p>全程就6分钟左右，就结束了。感觉老师知道我不会来了，就有点聊天的意思。我的最后一场预推免面试就这样结束了。</p><h2 id="929当天"><a href="#929当天" class="headerlink" title="929当天"></a>929当天</h2><p>填了一个清华，一个南大。</p><p><img src="/Bao-Yan/baoyan-2.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>最终拒绝了南大，把这个机会让给有缘人。</p><p><img src="/Bao-Yan/baoyan-3.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>清华向来发的比较晚，最终在下午13：56的时候发了拟录取，点击接收，保研就结束了。</p><p><img src="/Bao-Yan/baoyan-4.png" alt="img"></p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>还没准备就已开始，还没有感触就已结束。</p><p>我保研的结束，实际上在19号晚接受清软offer时。那一刻，我在北京的地铁上，匆匆转三条地铁线路赶往北京西站，然后坐过夜的火车回长沙。此前在曾住过的酒店澡堂洗了澡，因此头发还湿湿的。深夜约是九点，地铁上已经没有太多的人了，估计也是下班的苦命人。微信企业邮箱收到了一条邮件，点开发现是清华系统提示状态有变化。内心有一阵激动，但结合之前面试的情况，我觉得还是不太可能。抱着想让自己死心的想法，同时还有一种迫切期待得到结果的冲动，我从背包里掏出电脑，连上手机热点，然后点开系统，然后发现了是否确认“初步录取”。这一刻，我心里其实没有太大的波澜。这三个月以来，我经历过绝望，经历过纠结，经历过各种各样状况百出的局面，心里已经麻木了。大有种看开想开的感觉。我其实没有那种三年努力终于得到回报的那种爽感与快感，更多的是一种水到渠成、自然而然的宿命感。我感觉自己是被命运推着来到了这个结局，但如果命运途中发生了一点微小的改变呢，也许会有很不同的结果。但我还是很庆幸，能以这个作为结束，是我最喜欢的硕士offer，虽然是我不敢想的学校。我用手机给妈妈打了一个电话，告知她我不用继续往下走了，因为清华能录上。电话那头先是一阵沉默，然后是哽咽，母亲需要时间消化这个消息。</p><p>诚然，这几个月以来我过的实在不容易。而作为应该是我保研征途中最难的这一场，我居然没有时间做太多准备。除了在南大的机考，我近期并没有练过机试；同样，除了国防科大和南大这两场，距离夏令营的5场面试也过去了很久，我的面试状态已经有了很下滑的趋势，实际上我面试状态的顶峰应该在中山那时。我的精力都用在了别的事情上。因此，除了宿命，我想不出别的理由来解释这个结果。不过好在是以这里结束，这是我能接受的结局，也是我能走出最好的结局。万幸的是，这唯一的机会，被我死死地抓住了。曾有朋友对我说，你要一而再再而三地救自己于水火之中，因为能拯救你自己的，只有你自己，没有别人。我真的很感谢这份幸运，以及之前为这份幸运做出的一切努力。</p><p>保研的目标，是在大一就定下的。高考时我历次模考基本有南大的水准，物理爆冷最后来了本科的学校。之前听说同专业有高中母校来本科母校最后去上交直博的事例，我一直摆在心中当做追随的目标。而清华的title可以完美覆盖上交的title，同时读硕也是我既定的路线。因此这个结局是唯一破局的方法，也是我唯一能接受的结局。我很幸运地得到了它。</p><p>回望这三个月，从6月末离开长沙前往同济这第一个夏令营开始，到9月末本校的最后一个线上营结束，正好十个营，这是否正好对应着十全十美呢，我不知道。我所记得的是，夏令营时七月上半旬的旅行：坐飞机从成都凌晨抵达北京，上交面试完赶着公交到机场坐飞机飞向广州，然后再赶着倒数第二班地铁前往广州体育西路，此时已经过零点，没有地铁了，只能打车前往中山大学附近……这是一个人的旅程，是自己给自己的修行。但是在旅程中，总有可爱的同学陪伴。很巧的是，凡是住宿，都是本校的同学，这给了我安全感……</p><p>之前的经验贴说，保研的过程，也可以领略不同城市的风景。诚然如此，但是我终究是没有心情游玩的。我只是对不同城市有了更加形象的认识。我见识过北京郊区晚上的静谧，北京地铁海淀黄庄站的人流匆匆，广州不眠的夜晚与灯光，成都雨后的夜晚，上海随处可见的繁华，杭州如画美丽的西湖，长沙回程的路在去漫展时走过……有的城市我是第一次前往，有的城市我曾经去过，还有的城市我已经待了很久了……</p><p>我很喜欢上海，曾把复旦专硕作为自己锚定的结局。但是复旦终究与我无缘，两次拒绝我入营。我喜欢上海交大，因为这是米哈游发源的地方，同样也是我高考时想都不敢想的学校，但终究硕士不够格、直博不想读。我喜欢同济大学，同济大学也是我高考时高攀不起的学校，但拿到了优营之后，又有了其他的想法，最终放弃。最后想起来，也许我与上海在这一阶段，暂时无缘了，希望以后在工作的时候能有缘分吧。</p><p>A橙学长曾经说过，“保研，是一个不断认清自己的过程”。诚哉斯言。我从最初觉得同济就是很好的去处，到拿到南大的硕，再到拿到清华的硕。每一步的前进，都是我从不敢想象的，都是我从没有料到的，都是突破自身认知极限的。我不是一个很有自信的人，因此总是按照下限去定目标，在一次次得到了正面的反馈后，我才意识到，哦，原来我能够到这么远。诚然，保研也是一个探究自己极限的过程。有些事情，不去试，永远不知道自己能不能成；有些路，不去走，永远不知道自己能走多远；有些机会，不去拿，永远不知道自己能不能拿到。因此，只有不断尝试，不断探求自己能力的极限，才会不后悔，才会“尽吾志也而不能至者，可以无悔矣”。这一点我要感谢我的母亲，是她鼓励我去尝试所有可能的路径，我在清华机考前，自我怀疑过，“我都不知道我来这里干什么”，是我母亲一直坚持认为我要尝试所有可以尝试的机会，不留下后悔。</p><p>真的到了最后的最后的时候，确定了自己的去向之后，我开始关注身边的朋友们：隔壁专业的第一，在928早上候补到了复旦热门方向的学硕；隔壁另一个专业的第一，在927早上得到了复旦预推免的专硕；一起面试浙大的本校同学决定放弃浙大候补去本校的直博；一起去南大预推免的本校同学最终候补到了南大，我也最终候补到了南大……这一切的一切好似我追的番剧最终有了圆满的结局，又像失落的拼图一块一块都拼了起来。大家都有了自己满意的去处，有点像童话里的美好大结局。</p><p>保研是一个很漫长的过程，真正的战争从大一就开始了。这三个月（7、8、9）的夏令营和预推免，只是检验三年成果的一个契机。友情、亲情、师生情、运气、能力、机遇、奇遇、状态、临场发挥、身体健康……每一个因素都可能被放大为决定因素，每一个因素都在每个维度影响着最终的结果。保研是一个巨大的不定方程，你不可能将所有变量纳入考虑，比你能力强的某一个同学采取了什么样的填报策略，又发挥如何，题目是不是合他的胃口，是不是合你的胃口，wl前面的同学是不是因为有了更好的去处而放弃了offer给我让出了位置……这样的变量多到无法想象。我能做的，只有尽量把自己可以影响甚至决定的因素做到最好，然后静待结果。有时候，会发现即使我能做的全部拉到最好，我能干预的仍然是有限的。这个时候，能做事的，就只有命运的回响了。</p><p>至此，我们的故事结束了，而从今以后，就是你的故事了。</p>]]></content>
      
      
      <categories>
          
          <category> 杂谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Hexo自建一个github托管的静态网页</title>
      <link href="/2023/08/25/hexo-zi-jian-wang-zhan/"/>
      <url>/2023/08/25/hexo-zi-jian-wang-zhan/</url>
      
        <content type="html"><![CDATA[<h1 id="基于Hexo自建一个github托管的静态网页"><a href="#基于Hexo自建一个github托管的静态网页" class="headerlink" title="基于Hexo自建一个github托管的静态网页"></a>基于Hexo自建一个github托管的静态网页</h1><h2 id="建立github密钥"><a href="#建立github密钥" class="headerlink" title="建立github密钥"></a>建立github密钥</h2><pre class="line-numbers language-none"><code class="language-none">git config --global user.name wolfvoidgit config --global user.email 1055320990@qq.com三个回车，根据提示内容找到密钥储存地址，复制密钥在github上的ssh部分添加ssh git@github.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>经历如下过程，出现如下结果</p><pre class="line-numbers language-none"><code class="language-none">y@LAPTOP-S8GDLRKI MINGW64 ~&#x2F;Desktop$ ssh git@github.comThe authenticity of host &#39;github.com (20.205.243.166)&#39; can&#39;t be established.ED25519 key fingerprint is 密码.This key is not known by any other names.Are you sure you want to continue connecting (yes&#x2F;no&#x2F;[fingerprint])? yesWarning: Permanently added &#39;github.com&#39; (ED25519) to the list of known hosts.PTY allocation request failed on channel 0Hi wolfvoid! You&#39;ve successfully authenticated, but GitHub does not provide shell access.Connection to github.com closed.y@LAPTOP-S8GDLRKI MINGW64 ~&#x2F;Desktop$ ssh git@github.comPTY allocation request failed on channel 0Hi wolfvoid! You&#39;ve successfully authenticated, but GitHub does not provide shell access.Connection to github.com closed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第二次表示匹配成功</p><h2 id="确保node和npm已安装"><a href="#确保node和npm已安装" class="headerlink" title="确保node和npm已安装"></a>确保node和npm已安装</h2><h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>命令行如下</p><pre class="line-numbers language-none"><code class="language-none">npm install -g hexo-cli hexo init My_blogcd My_bloghexo new test_my_sitehexo ghexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来在本地localhost:4000可见初始网页</p><h2 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h2><pre class="line-numbers language-none"><code class="language-none">npm install hexo -g #安装Hexonpm update hexo -g #升级hexo init #初始化博客命令简写hexo n &quot;我的博客&quot; &#x3D;&#x3D; hexo new &quot;我的博客&quot; #新建文章hexo g &#x3D;&#x3D; hexo generate #生成hexo s &#x3D;&#x3D; hexo server #启动服务预览hexo d &#x3D;&#x3D; hexo deploy #部署hexo server #Hexo会监视文件变动并自动更新，无须重启服务器hexo server -s #静态模式hexo server -p 5000 #更改端口hexo server -i 192.168.1.1 #自定义 IPhexo clean #清除缓存，若是网页正常情况下可以忽略这条命令<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="推送网站"><a href="#推送网站" class="headerlink" title="推送网站"></a>推送网站</h2><p>blog根目录里的_config.yml文件称为站点配置文件</p><p>themes文件夹，里面也有个_config.yml文件，这个称为主题配置文件</p><p>打开站点的配置文件_config.yml，翻到最后修改为：</p><pre class="line-numbers language-none"><code class="language-none">deploy:  type: git  repo: https:&#x2F;&#x2F;github.com&#x2F;wolfvoid&#x2F;wolfvoid.github.io.git  branch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这里应该是有问题的，后面会修改</p><pre class="line-numbers language-none"><code class="language-none">npm install hexo-deployer-git --savehexo clean hexo g hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>报错如下</p><pre class="line-numbers language-none"><code class="language-none">(base) PS E:\My_blog\My_blog&gt; npm install hexo-deployer-git --savenpm ERR! Cannot read properties of null (reading &#39;matches&#39;)npm ERR! A complete log of this run can be found in:npm ERR! C:\Users\y\AppData\Local\npm-cache\_logs\2023-08-24T17_51_02_435Z-debug-0.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>原因：我的node版本太高了，反正就是不符合要求</p><p>补救方法：安装适合版本的node。为了方便管理，直接安装nvm</p><h2 id="安装nvm"><a href="#安装nvm" class="headerlink" title="安装nvm"></a>安装nvm</h2><p><a href="https://www.rstk.cn/news/1475977.html?action=onClick">https://www.rstk.cn/news/1475977.html?action=onClick</a></p><p>注意在E:\nvm\nvm\settings.txt中替换镜像源为</p><pre class="line-numbers language-none"><code class="language-none">node_mirror:https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;node&#x2F;npm_mirror:https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;npm&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>注意路径为</p><p><img src="C:\Users\y\AppData\Roaming\Typora\typora-user-images\image-20230825151837550.png" alt="image-20230825151837550"></p><p>出现安装nvm后node和npm无法正常显示的问题</p><p><a href="https://blog.csdn.net/taylorzun/article/details/105471841">https://blog.csdn.net/taylorzun/article/details/105471841</a></p><h2 id="★基本搭建结束符★"><a href="#★基本搭建结束符★" class="headerlink" title="★基本搭建结束符★"></a>★基本搭建结束符★</h2><p>至此网站基本的工作完成了，主题为landscape，太low了，我想要更换主题</p><h2 id="闪烁之狐主题"><a href="#闪烁之狐主题" class="headerlink" title="闪烁之狐主题"></a>闪烁之狐主题</h2><p>hexo-theme-matery的示例网站：<a href="http://blinkfox.com/">http://blinkfox.com/</a></p><p>介绍网站<a href="https://zhuanlan.zhihu.com/p/35668237">https://zhuanlan.zhihu.com/p/35668237</a></p><p>★详见“闪烁之狐”主题的README</p><p>根据该README文件完成了新建所有页的操作</p><p>并完成了插件构建 </p><h2 id="解决更换主题后无法显示的问题"><a href="#解决更换主题后无法显示的问题" class="headerlink" title="解决更换主题后无法显示的问题"></a>解决更换主题后无法显示的问题</h2><p>hexo更换主题后出现问题：WARN No layout: index.html</p><p><a href="https://blog.csdn.net/weixin_44460555/article/details/111866191">https://blog.csdn.net/weixin_44460555/article/details/111866191</a></p><p>主要来说就是下载的包名字是hexo-theme-matery-master，而设置里面是用的hexo-theme-matery，它找不到了。把它对应起来就好了。</p><h2 id="解决无法连接github的问题"><a href="#解决无法连接github的问题" class="headerlink" title="解决无法连接github的问题"></a>解决无法连接github的问题</h2><p>解决无法连接github的 Connection was reset问题</p><pre class="line-numbers language-none"><code class="language-none">fatal: unable to access &#39;https:&#x2F;&#x2F;github.com&#x2F;wolfvoid&#x2F;wolfvoid.github.io.git&#x2F;&#39;: Recv failure: Connection was resetFATAL Something&#39;s wrong. Maybe you can find the solution here: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;troubleshooting.htmlError: Spawn failed    at ChildProcess.&lt;anonymous&gt; (E:\My_blog\blog\node_modules\hexo-util\lib\spawn.js:51:21)    at ChildProcess.emit (node:events:390:28)    at ChildProcess.cp.emit (E:\My_blog\blog\node_modules\cross-spawn\lib\enoent.js:34:29)    at Process.ChildProcess._handle.onexit (node:internal&#x2F;child_process:290:12)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>解决方法：</p><p>_config.yml文件修改为</p><pre class="line-numbers language-none"><code class="language-none">deploy:  type: git  repo: git@github.com:wolfvoid&#x2F;wolfvoid.github.io.git  branch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="如何向github仓库上传文件"><a href="#如何向github仓库上传文件" class="headerlink" title="如何向github仓库上传文件"></a>如何向github仓库上传文件</h2><p>（使用github作为图床）</p><pre class="line-numbers language-none"><code class="language-none">git init #把这个文件夹变成gitgit status #查看文件夹里的文件的情况git add xxxx #添加东西git commit -m &#39;我提交了xxx&#39; #注释建立github密钥联系建立GitHub上的仓库git remote add origin git@github.com:wolfvoid&#x2F;pictures.git#若初次上传git push -u origin master若已经有过东西git pull --rebase origin mastergit push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用上述方法出错如下</p><pre class="line-numbers language-none"><code class="language-none">$ git push origin mastererror: src refspec master does not match anyerror: failed to push some refs to &#39;github.com:wolfvoid&#x2F;pictures.git&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>错误原因是git上的master和github上的main不符合（有病吧）</p><p><a href="https://blog.csdn.net/gongdamrgao/article/details/115032436?spm=1001.2014.3001.5502">https://blog.csdn.net/gongdamrgao/article/details/115032436?spm=1001.2014.3001.5502</a></p><p>操作流程：</p><pre class="line-numbers language-none"><code class="language-none">git clone git@github.com:wolfvoid&#x2F;pictures.git #先把远程仓库扒下来git add xxxx #添加东西git commit -m &#39;我提交了xxx&#39; #注释git push origin main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这样应该就没问题了</p>]]></content>
      
      
      <categories>
          
          <category> webpage </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenMP并行编程</title>
      <link href="/2023/08/25/openmp-bing-xing-bian-cheng/"/>
      <url>/2023/08/25/openmp-bing-xing-bian-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="OpenMP并行编程"><a href="#OpenMP并行编程" class="headerlink" title="OpenMP并行编程"></a>OpenMP并行编程</h1><p>在codeblocks上配置OpenMP</p><p>本质：</p><p>编译时添加 -fopenmp命令</p><p>链接时添加 -lgomp -lpthread</p><p>【vscode本机】</p><p>使用终端编译</p><p> g++ -fopenmp -lgomp -lpthread parallel.cpp</p><p>使用以下命令编译即可直接得到结果</p><pre class="line-numbers language-none"><code class="language-none">g++ -fopenmp -lgomp -lpthread parallel.cpp -o process.exe ; .\process.exe<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><pre class="line-numbers language-none"><code class="language-none">#include&lt;omp.h&gt;#include&lt;iostream&gt;using namespace std;int main()&#123;#pragma omp parallel&#123;cout &lt;&lt; &quot;Hello, world!&quot; &lt;&lt; endl;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>设置并行线程个数</p><pre class="line-numbers language-none"><code class="language-none">#pragma omp parallel num_threads(5)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者</p><pre class="line-numbers language-none"><code class="language-none">omp_set_num_threads(2);#pragma omp parallel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>循环</p><pre class="line-numbers language-none"><code class="language-none">#include&lt;omp.h&gt;#include&lt;iostream&gt;using namespace std;int main()&#123;omp_set_num_threads(2);#pragma omp parallel&#123;#pragma omp forfor(int i&#x3D;0;i&lt;4;i++) cout &lt;&lt; omp_get_thread_num() &lt;&lt; endl;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="用schedule子句进行for循环任务调度的管理"><a href="#用schedule子句进行for循环任务调度的管理" class="headerlink" title="用schedule子句进行for循环任务调度的管理"></a>用schedule子句进行for循环任务调度的管理</h2><p>schedule子句形式</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">schedule(type, size)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>type参数有四种：1.static, 2.dynamic, 3.guided, 4.runtime</p><p>size参数是整形数据：表示循环迭代次数划分的单位。</p><ul><li><p><strong>static参数</strong></p><p>静态调度，不用size参数时分配给每个程序的都是n&#x2F;t次连续迭代，n为迭代次数，t为并行的线程数目。</p></li><li><p><strong>dynamic参数</strong></p><p>动态调度模式是先到先得的方式进行任务分配，不用size参数的时候，先把任务干完的线程先取下一个任务，以此类推，而不是一开始就分配固定的任务数。使用size参数的时候，分配的任务以size为单位，一次性分配size个。虽然很智能，在任务难度不均衡的时候适合用dynamic，否则会引起过多的任务动态申请的开销。</p></li><li><p><strong>guided参数</strong></p><p>刚开始每个线程会分配到比较大的迭代块，后来分配到的迭代块逐渐递减，没有指定size就会降到1，否则降到size。</p></li><li><p><strong>runtime</strong></p><p>基本不会用到，需要了解的可以自行了解。</p></li></ul><h2 id="sections制导指令"><a href="#sections制导指令" class="headerlink" title="sections制导指令"></a>sections制导指令</h2><p>用sections把不同的区域交给不同的线程去执行</p><p>用法：</p><pre class="line-numbers language-none"><code class="language-none">#include&lt;omp.h&gt;#include&lt;iostream&gt;using namespace std;int main()&#123;omp_set_num_threads(3);#pragma omp parallel sections&#123;#pragma omp section&#123;cout &lt;&lt;omp_get_thread_num();&#125;#pragma omp section&#123;cout &lt;&lt; omp_get_thread_num();&#125;#pragma omp section&#123;cout &lt;&lt; omp_get_thread_num();&#125;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="single制导指令"><a href="#single制导指令" class="headerlink" title="single制导指令"></a>single制导指令</h2><p>single制导指令所包含的代码段只有一个线程执行，别的线程跳过该代码，如果没有nowait子句，那么其他线程将会在single制导指令结束的隐式同步点等待。有nowait子句其他线程将跳过等待往下执行。</p><pre class="line-numbers language-none"><code class="language-none">int main()&#123;omp_set_num_threads(4);#pragma omp parallel&#123;#pragma omp single&#123;cout &lt;&lt; &quot;single thread&#x3D;&quot; &lt;&lt; omp_get_thread_num()&lt;&lt;endl;&#125;cout &lt;&lt; omp_get_thread_num() &lt;&lt; endl;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 并行编程 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
